<!DOCTYPE html>
<html lang="cn">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"zsdlove.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="å®‰å…¨æ‰«ææŠ€æœ¯åˆ†äº«">
<meta property="og:type" content="website">
<meta property="og:title" content="pOny&#39;s blog">
<meta property="og:url" content="https://zsdlove.github.io/index.html">
<meta property="og:site_name" content="pOny&#39;s blog">
<meta property="og:description" content="å®‰å…¨æ‰«ææŠ€æœ¯åˆ†äº«">
<meta property="og:locale">
<meta property="article:author" content="pOny">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zsdlove.github.io/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"cn","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>pOny's blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">pOny's blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">pOny</p>
  <div class="site-description" itemprop="description">å®‰å…¨æ‰«ææŠ€æœ¯åˆ†äº«</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">5</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zsdlove.github.io/2025/03/10/Artemis-SAST/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="pOny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pOny's blog">
      <meta itemprop="description" content="å®‰å…¨æ‰«ææŠ€æœ¯åˆ†äº«">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | pOny's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
              <span class="post-sticky-flag" title="Sticky">
                <i class="fa fa-thumbtack"></i>
              </span><a href="/2025/03/10/Artemis-SAST/" class="post-title-link" itemprop="url">Artemis-SAST</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-03-10 22:47:48" itemprop="dateCreated datePublished" datetime="2025-03-10T22:47:48+08:00">2025-03-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-04-21 13:15:09" itemprop="dateModified" datetime="2025-04-21T13:15:09+08:00">2025-04-21</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Artemis-Download"><a href="#Artemis-Download" class="headerlink" title="Artemis Download"></a>Artemis Download</h1><p><a target="_blank" rel="noopener" href="https://github.com/zsdlove/Artemis-release/releases/">download</a></p>
<h1 id="Artemis-Introduction"><a href="#Artemis-Introduction" class="headerlink" title="Artemis Introduction"></a>Artemis Introduction</h1><p><a href="https://zsdlove.github.io/2025/03/03/Artemis-%E9%9D%99%E6%80%81%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F%E5%99%A8%E4%BB%8B%E7%BB%8D/">introduction</a></p>
<h1 id="Artemis-Documentation"><a href="#Artemis-Documentation" class="headerlink" title="Artemis Documentation"></a>Artemis Documentation</h1><p><a href="https://zsdlove.github.io/2025/03/10/Artemis-Documentation/">documentation</a></p>
<h1 id="Knowledge-Planet"><a href="#Knowledge-Planet" class="headerlink" title="Knowledge Planet"></a>Knowledge Planet</h1><p><img src="/images/image.png" alt="æ˜Ÿçƒ"></p>
<h1 id="Wechat"><a href="#Wechat" class="headerlink" title="Wechat"></a>Wechat</h1><p><img src="/images/wechat.jpeg" alt="wechat"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zsdlove.github.io/2025/04/30/Artemis-Mcp-Server/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="pOny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pOny's blog">
      <meta itemprop="description" content="å®‰å…¨æ‰«ææŠ€æœ¯åˆ†äº«">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | pOny's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/04/30/Artemis-Mcp-Server/" class="post-title-link" itemprop="url">Artemis-Mcp-Server</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2025-04-30 01:12:16 / Modified: 01:23:55" itemprop="dateCreated datePublished" datetime="2025-04-30T01:12:16+08:00">2025-04-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>artemis mcp server æä¾›äº†å¤§æ¨¡å‹è°ƒç”¨artemisè¿›è¡Œé™æ€ä»£ç æ‰«æçš„èƒ½åŠ›ï¼Œæ¬¢è¿é›†æˆartemis é™æ€ä»£ç æ‰«æå™¨çš„mcp serverè¿›è¡Œä»£ç å®‰å…¨æ‰«æã€‚<a target="_blank" rel="noopener" href="https://github.com/zsdlove/artemis-mcp-server">ç‚¹å‡»æ­¤å¤„ä¸‹è½½artemis-mcp-server</a></p>
<h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">python3 -m artemis-mcp-server --<span class="built_in">help</span></span><br><span class="line">pony@ponydeMBP % python3 -m artemis-mcp-server --<span class="built_in">help</span></span><br><span class="line">usage: __main__.py [-h] [-v] [-r RULE] [-s SERVER] [-p PORT]</span><br><span class="line"></span><br><span class="line">this is a mcp server <span class="keyword">for</span> artemis sast tool.</span><br><span class="line"></span><br><span class="line">options:</span><br><span class="line">  -h, --<span class="built_in">help</span>           show this <span class="built_in">help</span> message and <span class="built_in">exit</span></span><br><span class="line">  -v, --verbose        artemis-mcp-server-v0.1.0</span><br><span class="line">  -r, --rule RULE      path to rule</span><br><span class="line">  -s, --server SERVER  mcp server host</span><br><span class="line">  -p, --port PORT      mcp server port</span><br><span class="line">Example:</span><br><span class="line">python3 -m artemis-mcp-server -s 127.0.0.1 -p 8088</span><br></pre></td></tr></table></figure>
<h1 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h1><p>the config build.properties needs to be configured in the root directory of the project so that the scanner can compile properly.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Example:</span><br><span class="line">java_home = /Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home</span><br><span class="line">build_cmd= mvn clean package -X -DskipTests=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h1 id="Cline-config"><a href="#Cline-config" class="headerlink" title="Cline config"></a>Cline config</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;artemis-mcp-server&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;autoApprove&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;scan&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;disabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span> <span class="number">60</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://127.0.0.1:8082/sse&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;transportType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sse&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="Demonstration"><a href="#Demonstration" class="headerlink" title="Demonstration"></a>Demonstration</h1><details>
  <summary>cline é›†æˆä½¿ç”¨artemis mcp server è¿›è¡Œä»£ç å®‰å…¨æ‰«æ</summary>
  <video src="/images/artemis-mcp.mov" controls="controls"></video>
</details>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zsdlove.github.io/2025/03/10/Artemis-Documentation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="pOny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pOny's blog">
      <meta itemprop="description" content="å®‰å…¨æ‰«ææŠ€æœ¯åˆ†äº«">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | pOny's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/10/Artemis-Documentation/" class="post-title-link" itemprop="url">Artemis Documentation</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-03-10 20:50:06" itemprop="dateCreated datePublished" datetime="2025-03-10T20:50:06+08:00">2025-03-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-05-06 20:14:22" itemprop="dateModified" datetime="2025-05-06T20:14:22+08:00">2025-05-06</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><h2 id="è·å–è½¯ä»¶æœ€æ–°ç‰ˆæœ¬"><a href="#è·å–è½¯ä»¶æœ€æ–°ç‰ˆæœ¬" class="headerlink" title="è·å–è½¯ä»¶æœ€æ–°ç‰ˆæœ¬"></a>è·å–è½¯ä»¶æœ€æ–°ç‰ˆæœ¬</h2><p>ç”¨æˆ·å¯ä»<a target="_blank" rel="noopener" href="https://github.com/zsdlove/Artemis-release/releases/">https://github.com/zsdlove/Artemis-release/releases/</a> ä¸‹è½½æœ€æ–°çš„Artemisæ‰«æå™¨ã€‚</p>
<h2 id="é…ç½®æ¸…å•"><a href="#é…ç½®æ¸…å•" class="headerlink" title="é…ç½®æ¸…å•"></a>é…ç½®æ¸…å•</h2><p>Artemis ä»£ç å®‰å…¨æ‰«æå™¨åŒ…å«ä¸»ä½“å¼•æ“Artemis.jarå’Œä¸¤ä¸ªé…ç½®æ–‡ä»¶Checker.xmlå’Œbuild.propertiesã€‚å…¶ä¸­ï¼ŒChecker.xmlä¸­åŒ…å«æ‰«æå™¨å†…ç½®è§„åˆ™ä»¥åŠç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™ï¼›build.propertiesåŒ…å«ç¼–è¯‘é…ç½®ï¼Œä»¥åŠå…¶ä»–çš„ä¸€äº›æ‰«æå™¨å¿…è¦çš„è¿è¡Œæ—¶é…ç½®ã€‚</p>
<h2 id="ç¯å¢ƒä¾èµ–"><a href="#ç¯å¢ƒä¾èµ–" class="headerlink" title="ç¯å¢ƒä¾èµ–"></a>ç¯å¢ƒä¾èµ–</h2><ul>
<li>Artemisä¾èµ–jdk11ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬ï¼Œè¯·ç¡®ä¿è¿è¡Œç¯å¢ƒä¸­çš„jdkå¤§äºjdk11ã€‚</li>
<li>ç¼–è¯‘æ•è·æ‰€éœ€çš„jdkå¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ–é…ç½®æ–‡ä»¶å¦å¤–é…ç½®ï¼Œå¦‚æœæ²¡æœ‰é…ç½®ï¼Œåˆ™é»˜è®¤ç»§æ‰¿Artemisè¿è¡Œç¯å¢ƒæ‰€ä»¥ä¾èµ–çš„jdkç‰ˆæœ¬ã€‚</li>
</ul>
<h1 id="Quickstart"><a href="#Quickstart" class="headerlink" title="Quickstart"></a>Quickstart</h1><h2 id="åŸºæœ¬åŸç†è¯´æ˜"><a href="#åŸºæœ¬åŸç†è¯´æ˜" class="headerlink" title="åŸºæœ¬åŸç†è¯´æ˜"></a>åŸºæœ¬åŸç†è¯´æ˜</h2><p>Artemisä»£ç åˆ†æä¸»è¦åˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯è¿›è¡Œä»£ç ç¼–è¯‘æ•è·ï¼Œç¬¬äºŒæ­¥æ˜¯è¿›è¡Œä»£ç æ‰«æåˆ†æã€‚å…¶ä¸­ç¬¬ä¸€æ­¥éœ€è¦å°†ä»£ç è½¬æ¢ä¸ºä¸­é—´è¯­ä¹‰æ–‡ä»¶*.artï¼Œç¬¬äºŒæ­¥åˆ™ä½¿ç”¨æŒ‡å®šè§„åˆ™å¯¹æ•è·çš„è¯­ä¹‰æ–‡ä»¶è¿›è¡Œåˆ†æã€‚</p>
<h2 id="åŸºæœ¬ä½¿ç”¨è¯´æ˜"><a href="#åŸºæœ¬ä½¿ç”¨è¯´æ˜" class="headerlink" title="åŸºæœ¬ä½¿ç”¨è¯´æ˜"></a>åŸºæœ¬ä½¿ç”¨è¯´æ˜</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pony@ponydeMBP 1.0.0 % java -jar Artemis.jar -h</span><br><span class="line">Usage: SAST [-hV] [-bc=&lt;build_cmd&gt;] [-d=&lt;dbpath&gt;] [-j=&lt;java_home&gt;]</span><br><span class="line">            [-mr=&lt;mr_enable&gt;] [-od=&lt;out_dbpath&gt;] [-p=&lt;path&gt;] [-r=&lt;rulePath&gt;]</span><br><span class="line">            [-t=&lt;mr_target_path&gt;]</span><br><span class="line">static code analysis.</span><br><span class="line">      -bc, --build-command=&lt;build_cmd&gt;</span><br><span class="line">                            æŒ‡å®šç¼–è¯‘å‘½ä»¤.</span><br><span class="line">  -d, --database=&lt;dbpath&gt;   æŒ‡å®šåŠ è½½çš„æ•°æ®åº“è·¯å¾„.</span><br><span class="line">  -h, --help                Show this help message and exit.</span><br><span class="line">  -j, --java-home=&lt;java_home&gt;</span><br><span class="line">                            æŒ‡å®šjava_homeè·¯å¾„.</span><br><span class="line">      -mr, --mr-enable=&lt;mr_enable&gt;</span><br><span class="line">                            æ˜¯å¦å¯ç”¨mræ‰«æ.</span><br><span class="line">      -od, --output-database=&lt;out_dbpath&gt;</span><br><span class="line">                            æŒ‡å®šè¾“å‡ºçš„ç¼–è¯‘æ•°æ®åº“è·¯å¾„.</span><br><span class="line">  -p, --path=&lt;path&gt;         æŒ‡å®šæºç è·¯å¾„.</span><br><span class="line">  -r, --rule=&lt;rulePath&gt;     æŒ‡å®šè§„åˆ™è·¯å¾„.</span><br><span class="line">  -t, --mr-target-path=&lt;mr_target_path&gt;</span><br><span class="line">                            æŒ‡å®štargetæ•°æ®åº“è·¯å¾„.</span><br><span class="line">  -V, --version             Print version information and exit.</span><br></pre></td></tr></table></figure>
<h2 id="é¶åœºç¤ºä¾‹"><a href="#é¶åœºç¤ºä¾‹" class="headerlink" title="é¶åœºç¤ºä¾‹"></a>é¶åœºç¤ºä¾‹</h2><p><a target="_blank" rel="noopener" href="https://github.com/JoyChou93/java-sec-code.git">https://github.com/JoyChou93/java-sec-code.git</a><br>è¿™ä¸ªé¶åœºåšå¾—è¿˜æ˜¯æ¯”è¾ƒç”¨å¿ƒçš„ï¼Œä¸€ç›´ä»¥æ¥æµ‹è¯•éƒ½æ˜¯ç”¨çš„è¿™ä¸ªé¶åœºã€‚</p>
<h2 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h2><p>java-sec-codeç¼–è¯‘ä¾èµ–jdk1.8ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨build.propertiesé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šjava8ç¯å¢ƒé…ç½®æŒ‡å®šå¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java_home = /Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home</span><br><span class="line">report_output=report.json</span><br><span class="line">build_cmd= mvn clean package -X -DskipTests=true</span><br><span class="line">out_dir=workspace</span><br><span class="line">model_name=deepseek-ai/DeepSeek-V2.5</span><br><span class="line">max_token=512</span><br><span class="line">temperature=0.7</span><br><span class="line">top_p=0.7</span><br><span class="line">top_k=50</span><br><span class="line">frequency_penalty=0.5</span><br><span class="line">n=1</span><br><span class="line">model_api=https://api.siliconflow.cn/v1/chat/completions</span><br><span class="line">licenseData=Licensed to: pOny, Expires: 2025-4-31</span><br><span class="line">publicKey=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxidJDQRCW3aITgFN5vVF4tuaMu85igETA+cR4Pg//+aJfpjockyvAmdEiz0fKOlm+HyXDDGSzuzVgtf4MFEEI+I/UeON2BstGqE0kQd4KLs7+MbzmDttVzixVICl4i57LBHbh3Ef7ZwALknvhURH5XaZpqlIobSiiphf12uoFALK7sMfQDq0KFlkZnmvydDoF8leqqoh5wVwaA/0kKjrWH0pUu+x/l7EVxyqCsEXKdd2WYOE6zxfDxQkbBGYCjZ8W6AUQygy0T9/qXZRy4g16dN99TbnrcKTts8p1fMTOZgj9lEHtKaaDs8HvQa0CkHF1iCV6WI/5gWF9K9S4ZafwQIDAQAB</span><br><span class="line">signature=T1kqV8LWUhLd2rTtyROpgYx30tGFQDnoQCicQUXvvwWqf9uyD/dvx6ivVZua2LZHbxUU85WtryRA25AGeMvXaG9KVpWYeUwnUbG4lx/w3D0eWFcoloTmRdeYgYl9q9OxhR+n7CH5CoveghZU05ZGqIlLxeglrbnlCNB8n8J1NHVxMyvpTBl9vYxfx39WyvSTIytwXZb4vnwWXQVbUwdVmuHQuKHfpPBf0W1VnvQ/p3WDgRyAbL0v2e2eITMd7SGSU/9VC23kZjCy8p/cSNZ/VivEth6BFW1k52Gis4alNR9OZUbMsgrYcpo6ORCL+gOAU1RQiO+spffPhBipa9u4gg==</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘å‘½ä»¤æŒ‡å®šä¸ºmvn clean package -X -DskipTests&#x3D;trueï¼Œå…¶ä»–é»˜è®¤å³å¯ã€‚ä¸‹é¢æŒ‡å®šä»¥ä¸‹å‘½ä»¤å¼€å¯ç¼–è¯‘</p>
<h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘æ•è·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar Artemis.jar -p test/java-sec-code-master</span><br></pre></td></tr></table></figure>
<details>
  <summary>ç¼–è¯‘æ‰§è¡Œå®æˆ˜</summary>
  <video src="/images/ç¼–è¯‘.mov" controls="controls"></video>
</details>
å¦‚æœä½ å®ç°ç¼–è¯‘è¿‡ï¼Œæœ¬åœ°å·²ç»æœ‰ä¾èµ–åŒ…ç¼“å­˜äº†ï¼Œé‚£è¿™ä¸ªæ•è·è¿‡ç¨‹å¤§æ¦‚è€—æ—¶10ç§’ï¼Œå¦‚æœæ²¡æœ‰ç¼–è¯‘è¿‡ï¼Œé‚£è¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šè€—æ—¶ç¨ç¨å¤šä¸€äº›ã€‚

<h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>ä¸‹é¢æˆ‘ä»¬å¼€å§‹è¿›è¡Œæ¼æ´åˆ†æï¼Œæˆ‘ä»¬ç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar Artemis.jar -d workspace</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œworkspaceæ˜¯æˆ‘ä»¬æŒ‡å®šçš„æ•°æ®åº“ä¿å­˜çš„ç›®å½•ã€‚</p>
<details>
  <summary>åˆ†ææ‰§è¡Œå®æˆ˜</summary>
  <video src="/images/åˆ†æ.mov" controls="controls"></video>
</details>
å¯ä»¥çœ‹åˆ°è¿™ä¸ªè¿‡ç¨‹å¤§æ¦‚è€—æ—¶6ç§’ï¼Œå¯¹äºä¸€äº›è¯¸å¦‚java-sec-code-masterè¿™æ ·å°å‹çš„é¡¹ç›®ï¼ŒArtemisçš„åˆ†æé€Ÿåº¦æå¿«ï¼Œå¦‚æœå†é…åˆä¸Šmræ‰«æï¼Œé‚£é€Ÿåº¦å°†ä¼šç›¸å½“ä»¤äººæ¬£å–œã€‚

<h1 id="merge-request-scan"><a href="#merge-request-scan" class="headerlink" title="merge request scan"></a>merge request scan</h1><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œmerge request scanï¼Œå…¶ä¸­-tæŒ‡å®šå‰ä¸€ä¸ªç‰ˆæœ¬çš„æ•°æ®åº“ï¼Œ-mræŒ‡å®šæ˜¯å¦å¯ç”¨mræ‰«æï¼Œ-odæŒ‡å®šæ–°çš„æ•°æ®åº“çš„åœ°å€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar Artemis.jar -p test/java-sec-code-master -t workspace -mr true -od workspace2</span><br></pre></td></tr></table></figure>
<details>
  <summary>mræ‰«æå®æˆ˜</summary>
  <video src="/images/mrscan.mov" controls="controls"></video>
</details>

<h1 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h1><h2 id="èŠ‚ç‚¹æè¿°"><a href="#èŠ‚ç‚¹æè¿°" class="headerlink" title="èŠ‚ç‚¹æè¿°"></a>èŠ‚ç‚¹æè¿°</h2><table>
<thead>
<tr>
<th>èŠ‚ç‚¹</th>
<th>è¯´æ˜</th>
<th>å¦‚ä½•è·å–</th>
</tr>
</thead>
<tbody><tr>
<td>YieldStmt</td>
<td>yieldè¯­å¥</td>
<td>ç¤ºä¾‹ï¼šdb.nodes.where(_.getClass.getSimpleName&#x3D;&#x3D;â€YieldStmtâ€)</td>
</tr>
<tr>
<td>MethodCallReferenceExpr</td>
<td>æ–¹æ³•å¼•ç”¨è¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ArrayAccessExpr</td>
<td>æ•°ç»„è®¿é—®è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ConditionExpr</td>
<td>æ¡ä»¶è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>AssignExpr</td>
<td>èµ‹å€¼è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>BreakStmt</td>
<td>breakè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>BooleanLiteralExpr</td>
<td>å¸ƒå°”è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>DoStmt</td>
<td>doè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>SwitchExpr</td>
<td>switchè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>LambdaExpr</td>
<td>lambdaè¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>AnnotationStmt</td>
<td>æ³¨è§£è¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>NullLiteralExpr</td>
<td>ç©ºå€¼è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ReturnStmt</td>
<td>è¿”å›è¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ThrowStmt</td>
<td>throwè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>NameExpr</td>
<td>åå­—è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>BlockStmt</td>
<td>åŸºæœ¬å—</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>LongLiteralExpr</td>
<td>é•¿æ•´å‹è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>CastExpr</td>
<td>å¼ºåˆ¶è½¬æ¢è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>TypeDecl</td>
<td>ç±»å‹å£°æ˜</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>FieldAccessExpr</td>
<td>å­—æ®µè®¿é—®è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>MethodDecl</td>
<td>å‡½æ•°å£°æ˜</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ForStmt</td>
<td>forè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ForeachStmt</td>
<td>foreachè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>WhileStmt</td>
<td>whileè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>IntegerLiteralExpr</td>
<td>æ•´å‹å€¼è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>VariableDeclarator</td>
<td>å˜é‡å£°æ˜è€…</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>CatchClause</td>
<td>catchclauseå£°æ˜</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>IfStmt</td>
<td>ifè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ObjectCreationExpr</td>
<td>å¯¹è±¡åˆ›å»º</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ParameterStmt</td>
<td>å‚æ•°è¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ExprStmt</td>
<td>è¡¨è¾¾å¼è¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>SwitchStmt</td>
<td>switchè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>BinaryExpr</td>
<td>binaryè¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ArrayInitializerExpr</td>
<td>æ•°ç»„åˆå§‹åŒ–è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>DoubleLiteralExpr</td>
<td>Doubleå€¼è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>CallExpr</td>
<td>å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>TryStmt</td>
<td>tryè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>FinallyStmt</td>
<td>finallyè¯­å¥</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>VariableDecExpr</td>
<td>å˜é‡å£°æ˜è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>TypeExpr</td>
<td>ç±»å‹è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>ArrayCreateExpr</td>
<td>æ•°ç»„åˆ›å»ºè¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>SwitchEntry</td>
<td>switchå…¥å£</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>StringLiteralExpr</td>
<td>å­—ç¬¦ä¸²å€¼è¡¨è¾¾å¼</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
<tr>
<td>XMLNode</td>
<td>xmlèŠ‚ç‚¹</td>
<td>ç±»ä¼¼ç¬¬ä¸€ä¸ªç¤ºä¾‹</td>
</tr>
</tbody></table>
<h2 id="èŠ‚ç‚¹åŸºæœ¬å±æ€§æè¿°"><a href="#èŠ‚ç‚¹åŸºæœ¬å±æ€§æè¿°" class="headerlink" title="èŠ‚ç‚¹åŸºæœ¬å±æ€§æè¿°"></a>èŠ‚ç‚¹åŸºæœ¬å±æ€§æè¿°</h2><p>æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€ç»ˆçˆ¶ç±»éƒ½æ˜¯ASTï¼Œå…¶ä¸­ï¼ŒASTçš„åŸºæœ¬æ•°æ®ç»“æ„å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>ç±»å‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>èŠ‚ç‚¹ç¼–å·ï¼Œå…·æœ‰å”¯ä¸€æ€§</td>
</tr>
<tr>
<td>code</td>
<td>sting</td>
<td>èŠ‚ç‚¹ä»£ç </td>
</tr>
<tr>
<td>start_line</td>
<td>int</td>
<td>èŠ‚ç‚¹èµ·å§‹è¡Œ</td>
</tr>
<tr>
<td>end_line</td>
<td>int</td>
<td>èŠ‚ç‚¹ç»“æŸè¡Œ</td>
</tr>
<tr>
<td>parent</td>
<td>int</td>
<td>çˆ¶èŠ‚ç‚¹</td>
</tr>
<tr>
<td>filePath</td>
<td>string</td>
<td>æ–‡ä»¶è·¯å¾„</td>
</tr>
<tr>
<td>method_id</td>
<td>int</td>
<td>èŠ‚ç‚¹æ‰€åœ¨å‡½æ•°</td>
</tr>
</tbody></table>
<h1 id="Basic-Usages"><a href="#Basic-Usages" class="headerlink" title="Basic Usages"></a>Basic Usages</h1><h2 id="å…³é”®è¯ä½¿ç”¨è¯´æ˜"><a href="#å…³é”®è¯ä½¿ç”¨è¯´æ˜" class="headerlink" title="å…³é”®è¯ä½¿ç”¨è¯´æ˜"></a>å…³é”®è¯ä½¿ç”¨è¯´æ˜</h2><table>
<thead>
<tr>
<th>å…³é”®å­—</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>db</td>
<td>æ•°æ®åº“ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½ä»è¿™æ¥</td>
<td></td>
</tr>
<tr>
<td>call</td>
<td>å‡½æ•°è°ƒç”¨</td>
<td>db.call</td>
</tr>
<tr>
<td>method</td>
<td>å‡½æ•°å£°æ˜</td>
<td>db.method</td>
</tr>
<tr>
<td>types</td>
<td>ç±»å‹å£°æ˜</td>
<td>db.types</td>
</tr>
<tr>
<td>xml</td>
<td>xmlæ–‡ä»¶ä¿¡æ¯</td>
<td>db.xml</td>
</tr>
<tr>
<td>where</td>
<td>æ¡ä»¶åˆ¤æ–­</td>
<td>db.call.where(_.name&#x3D;&#x3D;â€niceshotâ€)</td>
</tr>
<tr>
<td>whereNot</td>
<td>æ¡ä»¶åˆ¤æ–­</td>
<td>db.call.whereNot(_.name&#x3D;&#x3D;â€nicejobâ€)</td>
</tr>
<tr>
<td>filter</td>
<td>æ¡ä»¶è¿‡æ»¤</td>
<td>db.call.filter(_.name&#x3D;&#x3D;â€nicejobâ€)</td>
</tr>
<tr>
<td>limit</td>
<td>æšä¸¾é™åˆ¶ï¼Œé™åˆ¶è·å–çš„èŠ‚ç‚¹æ•°é‡</td>
<td>db.call.limit(10)</td>
</tr>
<tr>
<td>methodDeclaration</td>
<td>è·å–å‡½æ•°è°ƒç”¨å¯¹åº”çš„å‡½æ•°å£°æ˜ä¿¡æ¯</td>
<td>callExpr.methodDeclaration</td>
</tr>
<tr>
<td>hasPathTo</td>
<td>æ±¡ç‚¹è·¯å¾„è¿½è¸ª</td>
<td>sink.hasPathTo(source)</td>
</tr>
</tbody></table>
<h1 id="Rule-Develop"><a href="#Rule-Develop" class="headerlink" title="Rule Develop"></a>Rule Develop</h1><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªsqlæ³¨å…¥æ£€æµ‹è§„åˆ™çš„ç¤ºä¾‹ï¼Œé˜ä¸‹å¯ä»¿é€ æ­¤è§„åˆ™ç¼–å†™å…¶ä»–æ¼æ´æ£€æµ‹è§„åˆ™ï¼Œç¼–å†™çš„è§„åˆ™æ”¾ç½®åœ¨Checker.xmlçš„customize-rulesèŠ‚ç‚¹ä¸‹å³å¯ã€‚è§„åˆ™ç¼–å·ä½ å¯ä»¥è‡ªå®šä¹‰ï¼Œä¸è¿‡ï¼Œå¦‚æœè‡ªå®šä¹‰ç¼–å·çš„è¯ï¼Œä½ éœ€è¦è¡¥å……è¿™ä¸ªç¼–å·å¯¹åº”çš„æè¿°ä¿¡æ¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">val sources:List[ParameterStmt]= db.method</span><br><span class="line">    .where(_.annotation.nonEmpty)</span><br><span class="line">    .where &#123;</span><br><span class="line">      it =&gt; &#123;</span><br><span class="line">        it.annotation.count(_.code.contains(&quot;RequestMapping&quot;))&gt;0</span><br><span class="line">          || it.annotation.count(_.code.contains(&quot;GetMapping&quot;))&gt;0</span><br><span class="line">          || it.annotation.count(_.code.contains(&quot;ResponseBody&quot;))&gt;0</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    .filter(_.params.nonEmpty).map(_.params.head)</span><br><span class="line">val sink:List[Expr]=db.call.where&#123;</span><br><span class="line">      it=&gt;&#123;</span><br><span class="line">        it.fullName==&quot;java.sql.Statement.executeQuery&quot;</span><br><span class="line">        || it.fullName==&quot;java.sql.Statement.addBatch&quot;</span><br><span class="line">        || it.fullName==&quot;java.sql.Statement.execute&quot;</span><br><span class="line">        || it.fullName==&quot;java.sql.Statement.executeLargeUpdate&quot;</span><br><span class="line">        || it.fullName==&quot;java.sql.Statement.executeUpdate&quot;</span><br><span class="line">        || it.fullName==&quot;java.sql.Statement.executeBatch&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.filter(_.arguments.nonEmpty).map(_.arguments.head)</span><br><span class="line">val paths=sink.hashPathTo(sources)</span><br><span class="line">paths.show //æ‰“å°è·¯å¾„</span><br><span class="line">paths.num //ç»Ÿè®¡è·¯å¾„æ•°é‡</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>æ³¨æ„è§„åˆ™æ¯ä¸€è¡Œè§„åˆ™ä»£ç éƒ½éœ€è¦åŠ ä¸Š<code>&lt;br&gt;</code>è¿›è¡Œæ¢è¡Œï¼Œå¦åˆ™åç«¯è§„åˆ™ç¼–è¯‘å™¨ä¼šç¼–è¯‘å¼‚å¸¸ã€‚</li>
<li>è§„åˆ™éœ€è¦ä½¿ç”¨cdataèŠ‚ç‚¹è¿›è¡ŒåŒ…è£¹ï¼Œä»¥é¿å…è§„åˆ™ä¸­çš„å…³é”®è¯å¯¹xmlçš„è§£æäº§ç”Ÿå½±å“ã€‚</li>
</ul>
<h1 id="online-query"><a href="#online-query" class="headerlink" title="online query"></a>online query</h1><h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>ä»1.1.0ç‰ˆæœ¬èµ·ï¼Œartemisæ”¯æŒåœ¨çº¿queryã€‚å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ä¸€ä¸ªqueryæœåŠ¡å™¨ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar Artemis.jar -d [path/to/database] -sp 8089</span><br></pre></td></tr></table></figure>
<p>ï¼ˆæ³¨ï¼šspæŒ‡å®šç«¯å£å·ï¼‰</p>
<h2 id="æ¥å£è¯·æ±‚ç¤ºä¾‹"><a href="#æ¥å£è¯·æ±‚ç¤ºä¾‹" class="headerlink" title="æ¥å£è¯·æ±‚ç¤ºä¾‹"></a>æ¥å£è¯·æ±‚ç¤ºä¾‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8089/query?data=db.method.last.fullname</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œdataå‚æ•°åé¢è·Ÿæˆ‘ä»¬queryçš„è¯­å¥</p>
<h2 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h2><h3 id="å¯åŠ¨æœåŠ¡å™¨"><a href="#å¯åŠ¨æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨æœåŠ¡å™¨"></a>å¯åŠ¨æœåŠ¡å™¨</h3><details>
  <summary>å¯åŠ¨æœåŠ¡å™¨æ¼”ç¤º</summary>
  <video src="/images/å¯åŠ¨æœåŠ¡.mov" controls="controls"></video>
</details>

<h3 id="åœ¨çº¿query"><a href="#åœ¨çº¿query" class="headerlink" title="åœ¨çº¿query"></a>åœ¨çº¿query</h3><details>
  <summary>åœ¨çº¿queryæ¼”ç¤º</summary>
  <video src="/images/åœ¨çº¿query.mov" controls="controls"></video>
</details>

<h1 id="mcp-server"><a href="#mcp-server" class="headerlink" title="mcp server"></a>mcp server</h1><h2 id="è¯´æ˜-1"><a href="#è¯´æ˜-1" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>artemis mcp server å¯é›†æˆåˆ°clineä½¿ç”¨ã€‚</p>
<h2 id="cline-config"><a href="#cline-config" class="headerlink" title="cline config"></a>cline config</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;artemis-mcp-server&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;autoApprove&quot;</span>: [<span class="string">&quot;scan&quot;</span>],</span><br><span class="line">      <span class="string">&quot;disabled&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&quot;timeout&quot;</span>: <span class="number">60</span>,</span><br><span class="line">      <span class="string">&quot;url&quot;</span>: <span class="string">&quot;http://127.0.0.1:8082/sse&quot;</span>,</span><br><span class="line">      <span class="string">&quot;transportType&quot;</span>: <span class="string">&quot;sse&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¼”ç¤º-1"><a href="#æ¼”ç¤º-1" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h2><details>
  <summary>mcp serveræ¼”ç¤ºè§†é¢‘</summary>
  <video src="/images/artemis-mcp.mov" controls="controls"></video>
</details>

<h2 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h2><p><a target="_blank" rel="noopener" href="https://github.com/zsdlove/artemis-mcp-server/releases">ä¸‹è½½åœ°å€æˆ³è¿™é‡ŒğŸ‘‡</a></p>
<h2 id="è¯¦ç»†ä½¿ç”¨ä»‹ç»"><a href="#è¯¦ç»†ä½¿ç”¨ä»‹ç»" class="headerlink" title="è¯¦ç»†ä½¿ç”¨ä»‹ç»"></a>è¯¦ç»†ä½¿ç”¨ä»‹ç»</h2><p><a href="https://zsdlove.github.io/2025/04/30/Artemis-Mcp-Server/">è¯¦ç»†ä½¿ç”¨ä»‹ç»æˆ³è¿™é‡ŒğŸ‘‡</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zsdlove.github.io/2025/03/03/Artemis-%E9%9D%99%E6%80%81%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F%E5%99%A8%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="pOny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pOny's blog">
      <meta itemprop="description" content="å®‰å…¨æ‰«ææŠ€æœ¯åˆ†äº«">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | pOny's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/03/Artemis-%E9%9D%99%E6%80%81%E4%BB%A3%E7%A0%81%E6%89%AB%E6%8F%8F%E5%99%A8%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">Artemis é™æ€ä»£ç æ‰«æå™¨ä»‹ç»</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-03-03 20:39:58" itemprop="dateCreated datePublished" datetime="2025-03-03T20:39:58+08:00">2025-03-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-03-10 22:54:33" itemprop="dateModified" datetime="2025-03-10T22:54:33+08:00">2025-03-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ä¸€ã€å†™åœ¨å‰é¢"><a href="#ä¸€ã€å†™åœ¨å‰é¢" class="headerlink" title="ä¸€ã€å†™åœ¨å‰é¢"></a>ä¸€ã€å†™åœ¨å‰é¢</h1><p>å¥½ä¹…æ²¡æœ‰å†™æŠ€æœ¯æ–‡ç« äº†ï¼Œä»Šå¤©ï¼Œæƒ³ç»™å¤§å®¶æ¨èä¸€æ¬¾æˆ‘æœ€è¿‘ç²¾å¿ƒè®¾è®¡ç ”å‘çš„ä»£ç å®‰å…¨åˆ†ææ‰«æå™¨ï¼Œåå«Artemisã€‚è¿™æ¬¾ä»£ç å®‰å…¨æ‰«æå™¨èåˆäº†ç»å…¸çš„ä»£ç å®‰å…¨åˆ†ææŠ€æœ¯ä»¥åŠæœ€æ–°çš„å¤§æ¨¡å‹åˆ†ææŠ€æœ¯ï¼Œèƒ½å¤Ÿå¸®åŠ©å„ä½è¿›è¡Œæ›´åŠ æ·±å…¥çš„ä»£ç å®‰å…¨åˆ†æå·¥ä½œï¼Œå‘ç°æ›´å¤šä»£ç å®‰å…¨é—®é¢˜ã€‚(ä¸‹è½½é“¾æ¥å¯ä»æ–‡æœ«è·å–)</p>
<h1 id="äºŒã€Artemisé™æ€ä»£ç åˆ†ææŠ€æœ¯æ ˆï¼šæ•°æ®æµã€ç¼–è¯‘æ—¶æ•è·ã€æ§åˆ¶æµåˆ†æã€æ¼æ´åˆ†æã€AIæ™ºèƒ½åˆ†æ"><a href="#äºŒã€Artemisé™æ€ä»£ç åˆ†ææŠ€æœ¯æ ˆï¼šæ•°æ®æµã€ç¼–è¯‘æ—¶æ•è·ã€æ§åˆ¶æµåˆ†æã€æ¼æ´åˆ†æã€AIæ™ºèƒ½åˆ†æ" class="headerlink" title="äºŒã€Artemisé™æ€ä»£ç åˆ†ææŠ€æœ¯æ ˆï¼šæ•°æ®æµã€ç¼–è¯‘æ—¶æ•è·ã€æ§åˆ¶æµåˆ†æã€æ¼æ´åˆ†æã€AIæ™ºèƒ½åˆ†æ"></a>äºŒã€Artemisé™æ€ä»£ç åˆ†ææŠ€æœ¯æ ˆï¼šæ•°æ®æµã€ç¼–è¯‘æ—¶æ•è·ã€æ§åˆ¶æµåˆ†æã€æ¼æ´åˆ†æã€AIæ™ºèƒ½åˆ†æ</h1><h2 id="2-1-ç¼–è¯‘æ—¶æ•è·"><a href="#2-1-ç¼–è¯‘æ—¶æ•è·" class="headerlink" title="2.1 ç¼–è¯‘æ—¶æ•è·"></a>2.1 ç¼–è¯‘æ—¶æ•è·</h2><p>Artemisé™æ€ä»£ç åˆ†æå·¥å…·å€Ÿé‰´äº†coverityã€codeqlç­‰ä¸€äº›çŸ¥åä»£ç å®‰å…¨åˆ†æå·¥å…·çš„å®ç°æ€è·¯ï¼Œé‡‡ç”¨ç¼–è¯‘æ—¶è¿›è¡Œä¸€äº›è¯­ä¹‰ä¿¡æ¯çš„æ•è·ï¼Œæ¯”å¦‚ç±»å‹æ¨å¯¼ä¿¡æ¯ã€‚æ ¹æ®å¤šå¹´æ¥çš„é™æ€ä»£ç å®è·µç»éªŒæ¥çœ‹ï¼Œé™æ€ä»£ç åˆ†æçš„å‡†ç¡®æ€§ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå’Œç±»å‹æ¨å¯¼çš„å‡†ç¡®æ€§ç›¸å…³ï¼Œå°¤å…¶æ˜¯åœ¨è¿‡ç¨‹é—´åˆ†æçš„æ—¶å€™ï¼Œå¦‚æœä¸èƒ½å¤Ÿå¾ˆå¥½çš„è¯†åˆ«å‡½æ•°æ‰€å±å¯¹è±¡çš„ç±»å‹ï¼Œé‚£è°ƒç”¨é“¾æ„å»ºæ–¹é¢å°†ä¼šæœ‰å¾ˆå¤§çš„è¯¯å·®ã€‚å¾ˆå¤šå¼€æºç™½ç›’åŸºäºastéå†åˆ†ææ¨å¯¼ç±»å‹ä¿¡æ¯ï¼Œè¿™ç§æ–¹å¼çš„å¼Šç«¯æ˜¯ï¼Œä¸€æ–¹é¢éœ€è¦èŠ±è´¹å¾ˆå¤šæ—¶é—´åœ¨è§£æç¨‹åºçš„ç¼–å†™ä¸Šï¼Œä»¥é€‚é…å¾ˆå¤šçš„åœºæ™¯ï¼›å¦ä¸€æ–¹é¢ï¼Œé’ˆå¯¹ç¬¬ä¸‰æ–¹åº“çš„å‡½æ•°ï¼Œç”±äºä¸èƒ½å¯¹å…¶å£°æ˜è¿›è¡Œè§£æè¯†åˆ«ï¼Œå¯¼è‡´æˆ‘ä»¬å•ä»æºç å±‚å±‚é¢æ— æ³•å¾ˆå‡†ç¡®çš„æ¨æ–­å‡ºä»–çš„å‡½æ•°ç­¾åä¿¡æ¯ï¼Œè¿›è€Œå¯¼è‡´è¯¯æŠ¥åŠ å‰§ã€‚å…¶å®ï¼Œç¼–è¯‘å™¨å·²ç»å¸®åŠ©æˆ‘ä»¬æ¨å¯¼äº†æ‰€éœ€çš„å¤§å¤šæ•°ç±»å‹ä¿¡æ¯ï¼Œè€Œä¸”ä»–æ¨å¯¼çš„å‡†ç¡®æ€§è‚¯å®šæ˜¯é«˜äºå¼€æºç¤¾åŒºæ–¹æ¡ˆæ¨å¯¼çš„å‡†ç¡®æ€§ï¼Œå› ä¸ºç¼–è¯‘å™¨ä»–æ¨å¯¼ä¸æˆåŠŸçš„è¯ï¼Œé‚£ç¨‹åºæ ¹æœ¬è·‘ä¸èµ·æ¥ã€‚</p>
<h2 id="2-2-æ•°æ®æµåŠæ§åˆ¶æµ"><a href="#2-2-æ•°æ®æµåŠæ§åˆ¶æµ" class="headerlink" title="2.2 æ•°æ®æµåŠæ§åˆ¶æµ"></a>2.2 æ•°æ®æµåŠæ§åˆ¶æµ</h2><p>artemisåœ¨ç¼–è¯‘é˜¶æ®µï¼Œä¼šåŸºäºæå–çš„astä¿¡æ¯ï¼Œæ„å»ºé¡¹ç›®ä»£ç çš„æ§åˆ¶æµä¿¡æ¯ï¼Œå¹¶åŸºäºæ­¤ï¼Œè¿›ä¸€æ­¥è§£æå„ä¸ªè¿‡ç¨‹çš„æ•°æ®æµæŒ‡å‘å…³ç³»ã€‚æ‰€æœ‰ç¼–è¯‘æ—¶æå–çš„è¯­ä¹‰ä¿¡æ¯éƒ½æŒä¹…åŒ–å­˜å‚¨åœ¨æºç æ–‡ä»¶å¯¹åº”çš„ç¼–è¯‘äº§å‡ºç‰©ä¸­ã€‚å½“ç„¶ï¼Œè¿™å…¶ä¸­åªæ¶‰åŠè¿‡ç¨‹å†…çš„è¯­ä¹‰ä¿¡æ¯ï¼Œè‡³äºè¿‡ç¨‹é—´çš„è¯­ä¹‰ä¿¡æ¯ï¼Œartemisæ˜¯æ”¾åœ¨æ¼æ´åˆ†æè¿‡ç¨‹ä¸­è¿›è¡ŒåŠ¨æ€åˆ†æçš„ã€‚</p>
<h2 id="2-3-æ¼æ´åˆ†æ"><a href="#2-3-æ¼æ´åˆ†æ" class="headerlink" title="2.3 æ¼æ´åˆ†æ"></a>2.3 æ¼æ´åˆ†æ</h2><p>é’ˆå¯¹æ¼æ´åˆ†ææ–¹é¢ï¼Œartemisçš„é€šç”¨æ¼æ´æ£€æµ‹ç­–ç•¥ï¼Œæ¯”å¦‚é’ˆå¯¹æ•°æ®æµç›¸å…³çš„æ¼æ´æ£€æµ‹æ–¹æ¡ˆï¼Œä¸»è¦æ˜¯é€šè¿‡è§„åˆ™å®šä½ç›¸å…³çš„sinkç‚¹å’Œsourceç‚¹ï¼Œç„¶ååŸºäºæ•°æ®æµæŒ‡å‘ä¿¡æ¯ä»¥åŠè°ƒç”¨é“¾ä¿¡æ¯æ¨æ–­sourceç‚¹åˆ°è¾¾sinkç‚¹çš„å¯èƒ½è·¯å¾„ï¼Œè¿™ä¸€æ€è·¯ä¹Ÿä¼šä¸šå†…æ™®éä½¿ç”¨çš„åˆ†ææ€è·¯ã€‚ä¸ºäº†å®ç°è¿™ä¸ªæ–¹æ¡ˆï¼Œartemiså‚è€ƒäº†codeqlåŠjoernçš„æŸ¥è¯¢è„šæœ¬çš„è®¾è®¡æ€è·¯ï¼Œè®¾è®¡äº†ä¸€æ¬¾å±äºartemisè‡ªå·±çš„qlè¯­æ³•ï¼Œåå«artQLï¼Œå®‰å…¨å·¥ç¨‹å¸ˆå¯é€šè¿‡artQLçµæ´»çš„ç¼–å†™å®‰å…¨åˆ†æç­–ç•¥ã€‚<br>ä»¥ä¸‹æ˜¯Artemisæ¼æ´åˆ†æçš„åŸç†ç¤ºæ„å›¾<br><img src="/images/artemis.png" alt="artmis"></p>
<h2 id="2-4-AIæ™ºèƒ½åˆ†æ"><a href="#2-4-AIæ™ºèƒ½åˆ†æ" class="headerlink" title="2.4 AIæ™ºèƒ½åˆ†æ"></a>2.4 AIæ™ºèƒ½åˆ†æ</h2><p>Artemisä¸€ä¸ªæ¯”è¾ƒäº®çœ¼çš„åŠŸèƒ½å°±æ˜¯èƒ½å¤Ÿåœ¨è§„åˆ™å±‚é¢æä¾›ç›´æ¥è°ƒç”¨å¤§æ¨¡å‹è¿›è¡Œä»£ç å®‰å…¨æ£€æµ‹è§„åˆ™ç¼–å†™ï¼Œå‘ç°æ›´æ·±å±‚æ¬¡çš„é—®é¢˜ã€‚å…·ä½“å®ç°åŸç†ä»¥åŠåº”ç”¨å®è·µï¼Œè¯·ç§»æ­¥ç¬¬å››ä¸ªç« èŠ‚ã€‚</p>
<h1 id="ä¸‰ã€artQL"><a href="#ä¸‰ã€artQL" class="headerlink" title="ä¸‰ã€artQL"></a>ä¸‰ã€artQL</h1><p>ä¸ºäº†è®©è¯»è€…èƒ½å¤Ÿæ›´æ˜“äºç†è§£åç»­çš„ä¸€äº›ç« èŠ‚ï¼Œæˆ‘å…ˆç®€è¦çš„ä»‹ç»ä¸‹artQLçš„è¯­æ³•ã€‚ä¸‹é¢æ˜¯artQLæ¯”è¾ƒé‡è¦çš„å…³é”®è¯ï¼š</p>
<table>
<thead>
<tr>
<th>å…³é”®å­—</th>
<th>è¯´æ˜</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>db</td>
<td>æ•°æ®åº“ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½ä»è¿™æ¥</td>
<td></td>
</tr>
<tr>
<td>call</td>
<td>å‡½æ•°è°ƒç”¨</td>
<td>db.call</td>
</tr>
<tr>
<td>method</td>
<td>å‡½æ•°å£°æ˜</td>
<td>db.method</td>
</tr>
<tr>
<td>types</td>
<td>ç±»å‹å£°æ˜</td>
<td>db.types</td>
</tr>
<tr>
<td>xml</td>
<td>xmlæ–‡ä»¶ä¿¡æ¯</td>
<td>db.xml</td>
</tr>
<tr>
<td>where</td>
<td>æ¡ä»¶åˆ¤æ–­</td>
<td>db.call.where(_.name&#x3D;&#x3D;â€niceshotâ€)</td>
</tr>
<tr>
<td>whereNot</td>
<td>æ¡ä»¶åˆ¤æ–­</td>
<td>db.call.whereNot(_.name&#x3D;&#x3D;â€nicejobâ€)</td>
</tr>
<tr>
<td>filter</td>
<td>æ¡ä»¶è¿‡æ»¤</td>
<td>db.call.filter(_.name&#x3D;&#x3D;â€nicejobâ€)</td>
</tr>
<tr>
<td>limit</td>
<td>æšä¸¾é™åˆ¶ï¼Œé™åˆ¶è·å–çš„èŠ‚ç‚¹æ•°é‡</td>
<td>db.call.limit(10)</td>
</tr>
<tr>
<td>methodDeclaration</td>
<td>è·å–å‡½æ•°è°ƒç”¨å¯¹åº”çš„å‡½æ•°å£°æ˜ä¿¡æ¯</td>
<td>callExpr.methodDeclaration</td>
</tr>
<tr>
<td>hasPathTo</td>
<td>æ±¡ç‚¹è·¯å¾„è¿½è¸ª</td>
<td>sink.hasPathTo(source)</td>
</tr>
<tr>
<td>ä»¥ä¸Šæ˜¯å¯¹äºè§„åˆ™ç¼–å†™æ¯”è¾ƒå¸®åŠ©çš„å…³é”®å­—ä¿¡æ¯ï¼ŒåŸºäºå…³é”®å­—ä¿¡æ¯ä»‹ç»ä»¥åŠç¤ºä¾‹demoï¼Œç›¸æ¯”ä½ å·²ç»çŸ¥é“å¦‚ä½•å»ç¼–å†™ä¸€ä¸ªåŸºç¡€çš„å®‰å…¨æ£€æµ‹è§„åˆ™äº†ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªsqlæ³¨å…¥æ£€æµ‹çš„è§„åˆ™ï¼š</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">val sources = db.call.where(_.fullName==&quot;javax.servlet.http.HttpServletRequest.getParameter&quot;)</span><br><span class="line">val sink=db.call.where(_.fullName==&quot;org.springframework.jdbc.core.JdbcTemplate.update&quot;).filter(_.arguments.nonEmpty).map(_.arguments.head)</span><br><span class="line">val paths=sink.hashPathTo(sources)</span><br><span class="line">paths.show //æ‰“å°è·¯å¾„</span><br><span class="line">paths.num //ç»Ÿè®¡è·¯å¾„æ•°é‡</span><br></pre></td></tr></table></figure>
<h1 id="å››ã€å®é™…é¡¹ç›®åˆ†æ"><a href="#å››ã€å®é™…é¡¹ç›®åˆ†æ" class="headerlink" title="å››ã€å®é™…é¡¹ç›®åˆ†æ"></a>å››ã€å®é™…é¡¹ç›®åˆ†æ</h1><h2 id="4-1-é€šç”¨æ¼æ´åˆ†æ-ofcmsæ¼æ´åˆ†æ"><a href="#4-1-é€šç”¨æ¼æ´åˆ†æ-ofcmsæ¼æ´åˆ†æ" class="headerlink" title="4.1 é€šç”¨æ¼æ´åˆ†æ - ofcmsæ¼æ´åˆ†æ"></a>4.1 é€šç”¨æ¼æ´åˆ†æ - ofcmsæ¼æ´åˆ†æ</h2><h3 id="4-1-1-ofcms-sqlæ³¨å…¥åˆ†æ"><a href="#4-1-1-ofcms-sqlæ³¨å…¥åˆ†æ" class="headerlink" title="4.1.1 ofcms sqlæ³¨å…¥åˆ†æ"></a>4.1.1 ofcms sqlæ³¨å…¥åˆ†æ</h3><h4 id="æ¼æ´è¯´æ˜"><a href="#æ¼æ´è¯´æ˜" class="headerlink" title="æ¼æ´è¯´æ˜"></a>æ¼æ´è¯´æ˜</h4><p>æ˜¯éª¡å­æ˜¯é©¬ï¼Œæ‹¿å‡ºæ¥æºœæºœã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä½¿ç”¨artQLæ¥è¿›è¡Œä¸€äº›å®é™…çš„å®‰å…¨é—®é¢˜çš„åˆ†æã€‚æˆ‘ä»¬å°±ä»¥ofcmsè¿™ä¸ªé¡¹ç›®æ¥ä½œä¸ºä¾‹å­ã€‚<br>æ ¹æ®cve:<code>https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9615</code> æè¿°ï¼Œofcmsåœ¨1.1.3ç‰ˆæœ¬ä¹‹å‰å­˜åœ¨å¤§é‡çš„sqlæ³¨å…¥æ¼æ´ã€‚</p>
<h4 id="å…·ä½“ä½ç½®"><a href="#å…·ä½“ä½ç½®" class="headerlink" title="å…·ä½“ä½ç½®"></a>å…·ä½“ä½ç½®</h4><p>é€šè¿‡æºç åˆ†æï¼Œæˆ‘ä»¬å‘ç°ofcmsæ˜¯åŸºäºjfinalæ¡†æ¶è¿›è¡Œå¼€å‘ï¼Œä¸”sqlæ“ä½œä¹Ÿæ˜¯åŸºäºjfinalæä¾›çš„apiè¿›è¡Œå¤„ç†ã€‚ä¾‹å¦‚ï¼š<br><code>ofcms-admin/src/main/java/com/ofsoft/cms/admin/controller/system/SystemGenerateController.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">create</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> getPara(<span class="string">&quot;sql&quot;</span>);</span><br><span class="line">            Db.update(sql);</span><br><span class="line">            rendSuccessJson();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            rendFailedJson(ErrorCode.get(<span class="string">&quot;9999&quot;</span>), e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯¥æºç å¤§è‡´æ„æ€æ˜¯ä»ç½‘ç»œè¯·æ±‚å‚æ•°ä¸­è·å–sqlå‚æ•°ï¼Œç„¶åè°ƒç”¨Db.updateè¿›è¡Œæ•°æ®æ›´æ–°æ“ä½œã€‚<br>è¿™ä¸ªDb,é€šè¿‡è·Ÿè¸ªåˆ†æï¼Œå…¶å…¨è·¯å¾„æ˜¯ï¼šcom.jfinal.plugin.activerecord.Dbã€‚<br>è¿™é‡Œç›´æ¥å°†å¤–éƒ¨ä¼ å…¥çš„sqlè¯­å¥è¿›è¡Œæ‰§è¡Œï¼Œå¾ˆæ˜æ˜¾æ˜¯å­˜åœ¨sqlæ³¨å…¥æ¼æ´çš„ã€‚é‚£ä¹ˆå¦‚ä½•ç”¨artemisæ£€æµ‹è¯¥æ¼æ´å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç¼–å†™å¦‚ä¸‹è§„åˆ™ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c-rule</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>dataflow-rule-sqli<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>sqlæ³¨å…¥æ¼æ´<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//ç¤ºä¾‹ &amp;#xA;</span></span></span><br><span class="line"><span class="language-javascript">            def <span class="attr">sinks</span>:<span class="title class_">List</span>[<span class="title class_">Expr</span>]=db.<span class="property">call</span>.<span class="title function_">where</span>(_.<span class="property">fullName</span>==<span class="string">&quot;java.sql.Statement.executeQuery&quot;</span>).<span class="title function_">map</span>(_.<span class="property">arguments</span>.<span class="property">head</span>) &amp;#xA;</span></span><br><span class="line"><span class="language-javascript">            def sources = com.<span class="property">pony</span>.<span class="property">rule</span>.<span class="property">sources</span>.<span class="property">HttpSources</span>.<span class="property">http_entry</span> &amp;#xA;</span></span><br><span class="line"><span class="language-javascript">            def paths=sinks.<span class="title function_">hasPathTo</span>(sources) &amp;#xA;</span></span><br><span class="line"><span class="language-javascript">            paths.<span class="title function_">save</span>(name = <span class="string">&quot;sqlæ³¨å…¥æ¼æ´&quot;</span>, desc = <span class="string">&quot;sqlæ³¨å…¥æ¼æ´&quot;</span>,level = <span class="string">&quot;high&quot;</span>, rule_id = <span class="string">&quot;dataflow-rule-sqli&quot;</span>) &amp;#xA;</span></span><br><span class="line"><span class="language-javascript">        </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c-rule</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç®€å•è§£è¯»å†™è§„åˆ™ï¼Œè¯¥è§„åˆ™ä¸­sourceç‚¹ä¸ºjfinalæ¡†æ¶çš„ç½‘ç»œè¯·æ±‚å…¥å£ç‚¹getParaæˆ–getParamsMapï¼Œsinkç‚¹æ˜¯è¿›è¡Œæ¸²æŸ“æ“ä½œçš„renderå‡½æ•°ï¼Œå¦‚æœéœ€è¦ç²¾ç¡®çš„è¯†åˆ«apiï¼Œå¯ä½¿ç”¨fullnameæŒ‡å®šapiçš„å…¨é™å®šåã€‚æˆ‘ä»¬å°†è§„åˆ™åŠ å…¥åˆ°æˆ‘ä»¬çš„Checker.xmlè§„åˆ™æ–‡ä»¶ä¸­ï¼Œç„¶åä¸‹é¢æˆ‘ä»¬æ­£å¼è¿›è¡Œä»£ç åˆ†ææµ‹è¯•ã€‚<br>é¦–å…ˆï¼Œç”±äºæ¯ä¸€ä¸ªé¡¹ç›®éœ€è¦çš„jdkå’Œç¼–è¯‘å‘½ä»¤å¯èƒ½éƒ½ä¸å¤ªä¸€æ ·ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦æˆ‘ä»¬å…ˆé…ç½®ä¸‹é¡¹ç›®ç¼–è¯‘éœ€è¦çš„ç›¸å…³å‚æ•°ã€‚è¿™ä¸ªå‚æ•°åœ¨confç›®å½•ä¸‹çš„build.propertiesä¸­é…ç½®å³å¯ã€‚<br>å…·ä½“åœ¨build.propertiesæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨ä»¥ä¸‹é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java_home=/Library/Java/JavaVirtualMachines/jdk1.8.0_151.jdk/Contents/Home</span><br><span class="line">report_output=report.json</span><br><span class="line">build_cmd= mvn package -X -DskipTests=true</span><br><span class="line">out_dir=workspace</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œjava_homeæ˜¯æˆ‘ä»¬jdkçš„åœ°å€ï¼Œreport_outputæ˜¯æˆ‘ä»¬æŠ¥å‘Šè¾“å‡ºçš„åœ°å€ï¼Œbuild_cmdæ˜¯æˆ‘ä»¬çš„é¡¹ç›®ç¼–è¯‘å‘½ä»¤ï¼Œout_diræ˜¯ä¸­é—´è¯­ä¹‰æ•°æ®åº“è¾“å‡ºçš„ç›®å½•<br>é…ç½®å¥½åï¼Œä¸‹é¢æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯è¿›è¡Œç¼–è¯‘æ•è·<br><img src="/images/p2.png" alt="æ•è·"><br><img src="/images/p1.png" alt="æ•è·"><br>ä»å‘½ä»¤è¡Œæ‰§è¡Œæ—¥å¿—å¯ä»¥å‘ç°ï¼Œæ•è·449ä¸ªæºç å¤§æ¦‚è€—æ—¶55ç§’ï¼Œè¿™ä¸ªé€Ÿåº¦åº”è¯¥æ˜¯å¯ä»¥æ¥å—çš„ã€‚<br>ä¸‹é¢æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ¼æ´åˆ†æ:<br><code>java -jar Artemis.jar -d workspace</code><br><img src="/images/p3.png" alt="åˆ†æ"><br>å¯ä»¥å‘ç°Artemiså…±å‘ç°äº†43ä¸ªsqlæ³¨å…¥æ¼æ´ï¼Œ8ä¸ªæ¨¡ç‰ˆæ³¨å…¥ï¼Œä¸¤ä¸ªæ–‡ä»¶æ“çºµæ¼æ´å’Œä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ æ¼æ´ã€‚<br>å…¶ä¸­æˆ‘ä»¬åˆšæ‰åˆ†æçš„é‚£ä¸ªsqlæ³¨å…¥æ¼æ´çš„æ£€æµ‹ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;name&quot;: &quot;sqlæ³¨å…¥æ¼æ´&quot;,</span><br><span class="line">	&quot;checker_name&quot;: &quot;dataflow-rule-sqli&quot;,</span><br><span class="line">	&quot;trace&quot;: [&#123;</span><br><span class="line">		&quot;desc&quot;: &quot;&quot;,</span><br><span class="line">		&quot;line&quot;: 48,</span><br><span class="line">		&quot;code&quot;: &quot;sql&quot;,</span><br><span class="line">		&quot;filePath&quot;: &quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/admin/controller/system/SystemGenerateController.java&quot;</span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		&quot;desc&quot;: &quot;&quot;,</span><br><span class="line">		&quot;line&quot;: 47,</span><br><span class="line">		&quot;code&quot;: &quot;sql&quot;,</span><br><span class="line">		&quot;filePath&quot;: &quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/admin/controller/system/SystemGenerateController.java&quot;</span><br><span class="line">	&#125;, &#123;</span><br><span class="line">		&quot;desc&quot;: &quot;&quot;,</span><br><span class="line">		&quot;line&quot;: 47,</span><br><span class="line">		&quot;code&quot;: &quot;getPara(\&quot;sql\&quot;)&quot;,</span><br><span class="line">		&quot;filePath&quot;: &quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/admin/controller/system/SystemGenerateController.java&quot;</span><br><span class="line">	&#125;],</span><br><span class="line">	&quot;desc&quot;: &quot;                SQLæ³¨å…¥ï¼ˆSQL Injectionï¼‰æ˜¯ä¸€ç§é’ˆå¯¹Webåº”ç”¨ç¨‹åºçš„æ”»å‡»æŠ€æœ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒæ˜¯æŒ‡webåº”ç”¨ç¨‹åºå¯¹ç”¨æˆ·è¾“å…¥æ•°æ®çš„åˆæ³•æ€§æ²¡æœ‰åˆ¤æ–­æˆ–è¿‡æ»¤ä¸ä¸¥ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨webåº”ç”¨ç¨‹åºä¸­äº‹å…ˆå®šä¹‰å¥½çš„æŸ¥è¯¢è¯­å¥çš„ç»“å°¾ä¸Šæ·»åŠ é¢å¤–çš„SQLè¯­å¥ï¼Œåœ¨ç®¡ç†å‘˜ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å®ç°éæ³•æ“ä½œï¼Œä»¥æ­¤æ¥å®ç°æ¬ºéª—æ•°æ®åº“æœåŠ¡å™¨æ‰§è¡Œéæˆæƒçš„ä»»æ„æŸ¥è¯¢ï¼Œä»è€Œè¿›ä¸€æ­¥å¾—åˆ°ç›¸åº”çš„æ•°æ®ä¿¡æ¯ã€‚\u0026#xA;                SQLæ³¨å…¥æ”»å‡»é€šå¸¸åˆ©ç”¨äº†åº”ç”¨ç¨‹åºæ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥æ•°æ®è¿›è¡Œå……åˆ†éªŒè¯å’Œè¿‡æ»¤çš„æ¼æ´ï¼Œä½¿å¾—æ”»å‡»è€…å¯ä»¥å°†æ¶æ„çš„SQLè¯­å¥æ³¨å…¥åˆ°åº”ç”¨ç¨‹åºçš„è¾“å…¥æ¡†æˆ–URLä¸­ï¼Œä»è€Œç»•è¿‡åº”ç”¨ç¨‹åºçš„èº«ä»½éªŒè¯å’Œè®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œè¿›è€Œæ‰§è¡Œæ¶æ„æ“ä½œï¼Œå¦‚è·å–æ•æ„Ÿæ•°æ®ã€ä¿®æ”¹æ•°æ®ã€åˆ é™¤æ•°æ®ç­‰ã€‚\u0026#xA;            &quot;,</span><br><span class="line">	&quot;level&quot;: &quot;high&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-1-2-ofcms-æ¨¡ç‰ˆæ³¨å…¥æ¼æ´åˆ†æ"><a href="#4-1-2-ofcms-æ¨¡ç‰ˆæ³¨å…¥æ¼æ´åˆ†æ" class="headerlink" title="4.1.2 ofcms æ¨¡ç‰ˆæ³¨å…¥æ¼æ´åˆ†æ"></a>4.1.2 ofcms æ¨¡ç‰ˆæ³¨å…¥æ¼æ´åˆ†æ</h3><p>ä¸Šä¸ªç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨Artemiså¯¹ofcmsé¡¹ç›®è¿›è¡Œsqlæ³¨å…¥æ‰«æçš„æ—¶å€™ï¼Œå‘ç°åœ¨æ‰«æçš„è¿‡ç¨‹ä¸­ä¹Ÿå‘ç°äº†ä¸€äº›æœåŠ¡ç«¯æ¨¡ç‰ˆæ³¨å…¥æ¼æ´ã€‚é€šè¿‡å¯¹æŠ¥å‘Šçš„reviewï¼Œå‘ç°ä¸»è¦é—®é¢˜é›†ä¸­åœ¨æ–‡ä»¶<code>com/ofsoft/cms/front/controller/IndexController.java</code>åŠ<code>com/ofsoft/cms/front/controller/ComnController.java</code>ä¸­ï¼Œä¸‹é¢æˆ‘ä»¬ä»¥IndexController.javaä¸­çš„sstiæ¼æ´ä¸ºä¾‹å­ï¼Œè®²è§£ä¸‹Artemisæ˜¯å¦‚ä½•å‘ç°è¿™ä¸ªæ¼æ´çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line">package com.ofsoft.cms.front.controller;</span><br><span class="line"></span><br><span class="line">import com.jfinal.core.ActionKey;</span><br><span class="line">import com.jfinal.plugin.activerecord.Record;</span><br><span class="line">import com.ofsoft.cms.core.annotation.Action;</span><br><span class="line">import com.ofsoft.cms.core.config.AdminConst;</span><br><span class="line">import com.ofsoft.cms.core.config.FrontConst;</span><br><span class="line">import com.ofsoft.cms.core.uitle.SiteUtile;</span><br><span class="line"></span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * é¡µé¢é…ç½®</span><br><span class="line"> *</span><br><span class="line"> * @author OF</span><br><span class="line"> * @date 2018å¹´1æœˆ2æ—¥</span><br><span class="line"> */</span><br><span class="line">@Action()</span><br><span class="line">public class IndexController extends BaseController &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é¦–é¡µé¡µé¢</span><br><span class="line">     */</span><br><span class="line">    @ActionKey(value = &quot;index&quot;)</span><br><span class="line">    public void front() &#123;</span><br><span class="line">        render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + &quot;/index.html&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * ç®¡ç†å°é¦–é¡µé»˜è®¤è·³è½¬</span><br><span class="line">     */</span><br><span class="line">    @ActionKey(value = &quot;/admin&quot;)</span><br><span class="line">    public void admin() &#123;</span><br><span class="line">        redirect(AdminConst.indexHtml);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é¦–é¡µé¢é…ç½®</span><br><span class="line">     */</span><br><span class="line">    @ActionKey(value = &quot;/&quot;)</span><br><span class="line">    public void index() &#123;</span><br><span class="line">        Map params = getParamsMap();</span><br><span class="line">        String page = getPara(0);</span><br><span class="line">        //æ˜¯å¦æ˜¯é¦–é¡µ</span><br><span class="line">        if (&quot;/&quot;.equals(page) || page == null || &quot;index&quot;.equals(page)) &#123;</span><br><span class="line">            setAttr(&quot;site&quot;, SiteUtile.getSite());</span><br><span class="line">            render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + &quot;/index.html&quot;);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        //è·å–å½“å‰æ ç›®</span><br><span class="line">        params.put(&quot;site_id&quot;, SiteUtile.getSiteId());</span><br><span class="line">        params.put(&quot;column_english&quot;, page);</span><br><span class="line">        params.put(&quot;page&quot;, page);</span><br><span class="line">        Record record = SiteUtile.getColumn(params);</span><br><span class="line">        String isContent = getPara(1);</span><br><span class="line">        if (record == null) &#123;</span><br><span class="line">            if (&quot;c&quot;.equals(isContent)) &#123;</span><br><span class="line">                params.put(&quot;content_id&quot;, getParaToInt(2, 0));</span><br><span class="line">                setAttr(&quot;params&quot;, params);</span><br><span class="line">                render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + &quot;/article.html&quot;);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + FrontConst.pageError);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        setAttr(&quot;columns&quot;, record);</span><br><span class="line">        setAttr(&quot;params&quot;, params);</span><br><span class="line">        //æ˜¯å¦æ˜¯å†…å®¹</span><br><span class="line">        if (&quot;c&quot;.equals(isContent)) &#123;</span><br><span class="line">            params.put(&quot;content_id&quot;, getParaToInt(2, 0));</span><br><span class="line">            String templatePath = SiteUtile.getTemplatePath(record.getStr(&quot;column_content_page&quot;), &quot;/article.html&quot;);</span><br><span class="line">            render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + templatePath);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        //æ˜¯å¦æ˜¯å•é¡µ</span><br><span class="line">        if (&quot;1&quot;.equals(record.getStr(&quot;is_open&quot;))) &#123;</span><br><span class="line">            String templatePath = SiteUtile.getTemplatePath(record.getStr(&quot;template_path&quot;), &quot;/sing.html&quot;);</span><br><span class="line">            render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + templatePath);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        //å½“å‰é¡µç  æ ç›®é¡µ</span><br><span class="line">        int pageNum = getParaToInt(1, 1);</span><br><span class="line">        setAttr(&quot;pageNum&quot;, pageNum);</span><br><span class="line">        String templatePath = SiteUtile.getTemplatePath(record.getStr(&quot;template_path&quot;), &quot;/list.html&quot;);</span><br><span class="line">        render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + templatePath);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * åˆ—è¡¨é¡µé¢</span><br><span class="line">     */</span><br><span class="line">    @ActionKey(value = &quot;/list&quot;)</span><br><span class="line">    public void list() &#123;</span><br><span class="line">        render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + &quot;/list.html&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å†…å®¹é¡µé¢</span><br><span class="line">     */</span><br><span class="line">    @ActionKey(value = &quot;/content&quot;)</span><br><span class="line">    public void content() &#123;</span><br><span class="line">        String p = getRequest().getRequestURI();</span><br><span class="line">        p = p.replace(getRequest().getContextPath(), &quot;&quot;).replace(&quot;/content&quot;, &quot;&quot;);</span><br><span class="line">        render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ ç›®é¡µé¢</span><br><span class="line">     */</span><br><span class="line">    @ActionKey(value = &quot;/column&quot;)</span><br><span class="line">    public void column() &#123;</span><br><span class="line">        Map params = getParamsMap();</span><br><span class="line">        String page = getPara(0);</span><br><span class="line">        //å½“å‰é¡µç </span><br><span class="line">        int pageNum = getParaToInt(1, 1);</span><br><span class="line">        //è·å–å½“å‰æ ç›®</span><br><span class="line">        params.put(&quot;site_id&quot;, SiteUtile.getSiteId());</span><br><span class="line">        params.put(&quot;column_english&quot;, page);</span><br><span class="line">        params.put(&quot;page&quot;, page);</span><br><span class="line">        Record record = SiteUtile.getColumn(params);</span><br><span class="line">        setAttr(&quot;columns&quot;, record);</span><br><span class="line">        setAttr(&quot;params&quot;, params);</span><br><span class="line">        setAttr(&quot;pageNum&quot;, pageNum);</span><br><span class="line">        String templatePath = record.getStr(&quot;template_path&quot;);</span><br><span class="line">        if (templatePath == null) &#123;</span><br><span class="line">            templatePath = &quot;index.html&quot;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            if (!templatePath.startsWith(&quot;/&quot;)) &#123;</span><br><span class="line">                templatePath = &quot;/&quot; + templatePath;</span><br><span class="line">            &#125;</span><br><span class="line">            if (!templatePath.endsWith(&quot;.html&quot;)) &#123;</span><br><span class="line">                templatePath = templatePath + &quot;.html&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + templatePath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ™®é€šé¡µé¢</span><br><span class="line">     */</span><br><span class="line">    @ActionKey(value = &quot;/news&quot;)</span><br><span class="line">    public void news() &#123;</span><br><span class="line">        String p = getRequest().getRequestURI();</span><br><span class="line">        p = p.replace(getRequest().getContextPath(), &quot;&quot;).replace(&quot;/page&quot;, &quot;&quot;);</span><br><span class="line">        render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + p);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é¡µé¢é…ç½®</span><br><span class="line">     */</span><br><span class="line">    @ActionKey(value = &quot;page&quot;)</span><br><span class="line">    public void page() &#123;</span><br><span class="line">        String s = getPara(&quot;s&quot;);</span><br><span class="line">        if (s.lastIndexOf(&quot;.html&quot;) != 0) &#123;</span><br><span class="line">            s = s + &quot;.html&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">        setAttr(&quot;params&quot;, getParamsMap());</span><br><span class="line">        render(FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>é€šè¿‡æºç åˆ†æï¼Œå¾ˆæ˜¾ç„¶ï¼Œæ­¤å¤„çš„sstiæ³¨å…¥æ¼æ´çš„æ˜¯è¯¯æŠ¥çš„ï¼Œå› ä¸ºå…¶å¹¶ä¸èƒ½ç›´æ¥æ§åˆ¶sstiæ¨¡ç‰ˆå†…å®¹ï¼Œåªèƒ½æ§åˆ¶é€‰æ‹©å“ªä¸€ä¸ªsstiæ¨¡ç‰ˆã€‚<br>æˆ‘ä»¬çœ‹ä¸‹æˆ‘ä»¬ä¹‹å‰çš„artQLè§„åˆ™æ˜¯æ€ä¹ˆå†™çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;c-rule&gt;</span><br><span class="line">    &lt;id&gt;dataflow-rule-ssti-ofcms&lt;/id&gt;</span><br><span class="line">    &lt;name&gt;sstiæ³¨å…¥æ¼æ´&lt;/name&gt;</span><br><span class="line">    &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        &lt;![CDATA[</span><br><span class="line">            def source=com.pony.rule.sources.HttpSources.http_entry &lt;br&gt;</span><br><span class="line">            def sink=db.call.where(_.name==&quot;render&quot;).filter(_.arguments.nonEmpty).map(_.arguments.head) &lt;br&gt;</span><br><span class="line">            def paths=sink.hasPathTo(source) &lt;br&gt;</span><br><span class="line">            paths.save(name = &quot;sstiæ³¨å…¥æ¼æ´&quot;, desc = &quot;sstiæ³¨å…¥æ¼æ´&quot;,level = &quot;high&quot;, rule_id = &quot;dataflow-rule-ssti-ofcms&quot;) &lt;br&gt;</span><br><span class="line">        ]]&gt;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/c-rule&gt;</span><br></pre></td></tr></table></figure>
<p>åªè¿›è¡Œäº†ç®€å•çš„æ•°æ®æµè·¯å¾„æ¨æ–­ï¼Œæ²¡æœ‰æ›´æ·±å…¥åˆ†æå…¶ä¼ å…¥çš„å†…å®¹æ˜¯å¦èƒ½å¤ŸçœŸæ­£æ„æˆæ¼æ´ã€‚<br>æˆ‘ä»¬åœ¨åŸæ¥çš„è§„åˆ™ä¸Šè¿›è¡Œè¿›ä¸€æ­¥æ”¹é€ ,å¢åŠ ä¸€äº›æ–‡ä»¶ä¸Šä¼ é€»è¾‘çš„æœç´¢ï¼Œå¦å¤–æˆ‘ä»¬è¿˜éœ€è¦å°†ä¸¤è€…è¿›è¡Œé€‚å½“çš„å…³è”æ¯”å¯¹ï¼Œä»¥å‡å°‘è¯¯æŠ¥çš„äº§ç”Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;![CDATA[</span><br><span class="line">                    def source=com.pony.rule.sources.HttpSources.http_entry &lt;br&gt;</span><br><span class="line">                    def sink=db.call.where(_.name==&quot;render&quot;).filter(_.arguments.nonEmpty).map(_.arguments.head) &lt;br&gt;</span><br><span class="line">                    def paths=sink.hasPathTo(source) &lt;br&gt;</span><br><span class="line">                    val sink_file_upload= db.call.where &#123; &lt;br&gt;</span><br><span class="line">                      it =&gt; &lt;br&gt;</span><br><span class="line">                        it.fullName == &quot;java.nio.file.Files.write&quot; &lt;br&gt;</span><br><span class="line">                          || it.fullName == &quot;java.io.FileOutputStream.write&quot; &lt;br&gt;</span><br><span class="line">                    &#125;.filter(_.arguments.nonEmpty).map(_.arguments.head) &lt;br&gt;</span><br><span class="line">                    val paths_file_upload=sink_file_upload.hasPathTo(sources = source) &lt;br&gt;</span><br><span class="line">                    val final_path:ListBuffer[Path]=new ListBuffer[Path] &lt;br&gt;</span><br><span class="line">                    if(paths.nonEmpty)&#123; &lt;br&gt;</span><br><span class="line">                      paths.foreach&#123; &lt;br&gt;</span><br><span class="line">                        it=&gt;&#123; &lt;br&gt;</span><br><span class="line">                          val target:ListBuffer[AST]=new ListBuffer[AST] &lt;br&gt;</span><br><span class="line">                          val head_node=it.nodes.head &lt;br&gt;</span><br><span class="line">                          //æå–å…¶ä¸­çš„ç¬¦å·ä¿¡æ¯ &lt;br&gt;</span><br><span class="line">                          val t=head_node.parent.node &lt;br&gt;</span><br><span class="line">                          if(t.nonEmpty) &#123; &lt;br&gt;</span><br><span class="line">                            com.pony.dataflow.DataFlowAnalyze.find_target_expr(start = t.get, expr_Type = &quot;NameExpr&quot;, targets = target) &lt;br&gt;</span><br><span class="line">                            Breaks.breakable &#123; &lt;br&gt;</span><br><span class="line">                              target.foreach &#123; &lt;br&gt;</span><br><span class="line">                                t =&gt; &#123; &lt;br&gt;</span><br><span class="line">                                  val t_name = t.asInstanceOf[NameExpr].name &lt;br&gt;</span><br><span class="line">                                  //å¯¹äºæ¯ä¸ªæ–‡ä»¶ä¸Šä¼ æµ &lt;br&gt;</span><br><span class="line">                                  val filtered_paths = paths_file_upload.filter &#123; &lt;br&gt;</span><br><span class="line">                                    l =&gt; &#123; &lt;br&gt;</span><br><span class="line">                                      l.nodes.count(_.code.contains(t_name)) &gt; 0 &lt;br&gt;</span><br><span class="line">                                    &#125; &lt;br&gt;</span><br><span class="line">                                  &#125; &lt;br&gt;</span><br><span class="line">                                  if (filtered_paths.nonEmpty) &#123; &lt;br&gt;</span><br><span class="line">                                    filtered_paths.foreach &#123; &lt;br&gt;</span><br><span class="line">                                      f =&gt; &#123; &lt;br&gt;</span><br><span class="line">                                        val p=new Path() &lt;br&gt;</span><br><span class="line">                                        p.nodes.addAll(f.nodes.reverse++it.nodes.reverse) &lt;br&gt;</span><br><span class="line">                                        final_path.addOne(p) &lt;br&gt;</span><br><span class="line">                                      &#125; &lt;br&gt;</span><br><span class="line">                                    &#125; &lt;br&gt;</span><br><span class="line">                                    Breaks.break() &lt;br&gt;</span><br><span class="line">                                  &#125; &lt;br&gt;</span><br><span class="line">                                &#125; &lt;br&gt;</span><br><span class="line">                              &#125; &lt;br&gt;</span><br><span class="line">                            &#125; &lt;br&gt;</span><br><span class="line">                          &#125; &lt;br&gt;</span><br><span class="line">                        &#125; &lt;br&gt;</span><br><span class="line">                      &#125; &lt;br&gt;</span><br><span class="line">                    &#125; &lt;br&gt;</span><br><span class="line">                    final_path.toList.save(name = &quot;sstiæ³¨å…¥æ¼æ´&quot;, desc = &quot;sstiæ³¨å…¥æ¼æ´&quot;,level = &quot;high&quot;, rule_id = &quot;dataflow-rule-ssti-ofcms&quot;) &lt;br&gt;</span><br><span class="line">                ]]&gt;</span><br></pre></td></tr></table></figure>
<p>ç®€å•çš„æè¿°ä¸‹è§„åˆ™é€»è¾‘ï¼Œç¬¬ä¸€æ­¥è·å–å‰é¢çš„é‚£ä¸ªsstiæ¼æ´æ£€æµ‹è§„åˆ™çš„è·¯å¾„ï¼Œç„¶åå†è·å–é¡¹ç›®ä¸­å­˜åœ¨çš„æ–‡ä»¶ä¸Šä¼ æ•°æ®æµï¼Œç„¶åé€šè¿‡å…³è”åˆ†æï¼Œå°†ä¸¤è€…è·¯å¾„è¿›è¡Œmergeã€‚<br>ä¸‹é¢æ˜¯æ”¹é€ åçš„è§„åˆ™æ‰«æçš„ç»“æœè·¯å¾„</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sstiæ³¨å…¥æ¼æ´&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;checker_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dataflow-rule-ssti-ofcms&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;trace&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">121</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;getRequest().getParameter(\&quot;file_content\&quot;)&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/admin/controller/cms/TemplateController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">121</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fileContent&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/admin/controller/cms/TemplateController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">122</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fileContent&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/admin/controller/cms/TemplateController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">122</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fileContent&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/admin/controller/cms/TemplateController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">124</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;fileContent&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/admin/controller/cms/TemplateController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">74</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;String string&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/core/uitle/FileUtils.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">78</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;string&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/core/uitle/FileUtils.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">154</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;getPara(\&quot;s\&quot;)&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/front/controller/IndexController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">154</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/front/controller/IndexController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">156</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/front/controller/IndexController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">156</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;s&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/front/controller/IndexController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;line&quot;</span><span class="punctuation">:</span> <span class="number">159</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;FrontConst.TEMPLATE_PATE + SiteUtile.getTemplatePath() + s&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;filePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/Users/pony/Desktop/release/1.0.0/test/ofcms-V1.1.2/ofcms-admin/src/main/java/com/ofsoft/cms/front/controller/IndexController.java&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sstiæ³¨å…¥æ¼æ´&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;high&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªè·¯å¾„ä½œä¸ºæ¼æ´å­˜åœ¨å°±æ¯”è¾ƒæœ‰è¯´æœåŠ›äº†ã€‚<br>è¿™é‡ŒæŸ¥æ‰¾å‡ºæ¥çš„æ–‡ä»¶ä¸Šä¼ ç‚¹æ˜¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜æ¨¡æ¿</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">resPath</span> <span class="operator">=</span> getPara(<span class="string">&quot;res_path&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">pathFile</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;res&quot;</span>.equals(resPath))&#123;</span><br><span class="line">            pathFile = <span class="keyword">new</span> <span class="title class_">File</span>(SystemUtile.getSiteTemplateResourcePath());</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            pathFile = <span class="keyword">new</span> <span class="title class_">File</span>(SystemUtile.getSiteTemplatePath());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">dirName</span> <span class="operator">=</span> getPara(<span class="string">&quot;dirs&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (dirName != <span class="literal">null</span>) &#123;</span><br><span class="line">            pathFile = <span class="keyword">new</span> <span class="title class_">File</span>(pathFile, dirName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> getPara(<span class="string">&quot;file_name&quot;</span>);</span><br><span class="line">        <span class="comment">// æ²¡æœ‰ç”¨getParaåŸå› æ˜¯ï¼ŒgetParaå› ä¸ºå®‰å…¨é—®é¢˜ä¼šè¿‡æ»¤æŸäº›htmlå…ƒç´ ã€‚</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileContent</span> <span class="operator">=</span> getRequest().getParameter(<span class="string">&quot;file_content&quot;</span>);</span><br><span class="line">        fileContent = fileContent.replace(<span class="string">&quot;&amp;lt;&quot;</span>, <span class="string">&quot;&lt;&quot;</span>).replace(<span class="string">&quot;&amp;gt;&quot;</span>, <span class="string">&quot;&gt;&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(pathFile, fileName);</span><br><span class="line">        FileUtils.writeString(file, fileContent);</span><br><span class="line">        rendSuccessJson();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å¾ˆæ˜æ˜¾ï¼Œè¿™é‡Œæ˜¯å­˜åœ¨sstiæ¼æ´çš„ï¼Œæ¼æ´å‘ç”Ÿçš„é€»è¾‘æ˜¯ç”¨æˆ·ä¸Šä¼ æ¨¡ç‰ˆæ–‡ä»¶ï¼Œç„¶åä¿å­˜åœ¨æœåŠ¡ç«¯çš„æ¨¡ç‰ˆç›®å½•ä¸‹ï¼Œç„¶ååœ¨åç»­çš„æ¸²æŸ“æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯è°ƒç”¨ä¸åŒçš„æ¨¡ç‰ˆæ‰§è¡Œã€‚è¿™æ ·ï¼Œæ•´ä½“çš„æ¼æ´å‘ç”Ÿçš„è„‰ç»œå°±å¾ˆæ¸…æ¥šäº†ã€‚</p>
<h2 id="4-2-é€»è¾‘æ¼æ´åˆ†æ-åŸºäºai"><a href="#4-2-é€»è¾‘æ¼æ´åˆ†æ-åŸºäºai" class="headerlink" title="4.2 é€»è¾‘æ¼æ´åˆ†æ(åŸºäºai)"></a>4.2 é€»è¾‘æ¼æ´åˆ†æ(åŸºäºai)</h2><h3 id="4-2-1-newbee-mall-å‚ç›´è¶Šæƒæ¼æ´"><a href="#4-2-1-newbee-mall-å‚ç›´è¶Šæƒæ¼æ´" class="headerlink" title="4.2.1 newbee mall å‚ç›´è¶Šæƒæ¼æ´"></a>4.2.1 newbee mall å‚ç›´è¶Šæƒæ¼æ´</h3><p>é¡¹ç›®åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/newbee-ltd/newbee-mall">https://github.com/newbee-ltd/newbee-mall</a><br>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¿™ä¸ªé¡¹ç›®çš„æƒé™è®¤è¯é€»è¾‘æ˜¯ä»€ä¹ˆæ ·çš„ã€‚<br>é¦–å…ˆå¼€å‘è€…ä½¿ç”¨äº†spring securityæ¡†æ¶å¯¹ç”¨æˆ·çš„è¯·æ±‚è¿›è¡Œé‰´æƒï¼Œæƒé™é…ç½®ç±»ä¸ºï¼š<br>NeeBeeMallWebMvcConfigurer.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ltd.newbee.mall.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ltd.newbee.mall.common.Constants;</span><br><span class="line"><span class="keyword">import</span> ltd.newbee.mall.interceptor.AdminLoginInterceptor;</span><br><span class="line"><span class="keyword">import</span> ltd.newbee.mall.interceptor.NewBeeMallCartNumberInterceptor;</span><br><span class="line"><span class="keyword">import</span> ltd.newbee.mall.interceptor.NewBeeMallLoginInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NeeBeeMallWebMvcConfigurer</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AdminLoginInterceptor adminLoginInterceptor;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> NewBeeMallLoginInterceptor newBeeMallLoginInterceptor;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> NewBeeMallCartNumberInterceptor newBeeMallCartNumberInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªä»¥/adminä¸ºå‰ç¼€çš„urlè·¯å¾„ï¼ˆåå°ç™»é™†æ‹¦æˆªï¼‰</span></span><br><span class="line">        registry.addInterceptor(adminLoginInterceptor)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/admin/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/admin/login&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/admin/dist/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/admin/plugins/**&quot;</span>);</span><br><span class="line">        <span class="comment">// è´­ç‰©è½¦ä¸­çš„æ•°é‡ç»Ÿä¸€å¤„ç†</span></span><br><span class="line">        registry.addInterceptor(newBeeMallCartNumberInterceptor)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/admin/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/register&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/logout&quot;</span>);</span><br><span class="line">        <span class="comment">// å•†åŸé¡µé¢ç™»é™†æ‹¦æˆª</span></span><br><span class="line">        registry.addInterceptor(newBeeMallLoginInterceptor)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/admin/**&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/register&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/login&quot;</span>)</span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/goods/detail/**&quot;</span>)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/shop-cart&quot;</span>)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/shop-cart/**&quot;</span>)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/saveOrder&quot;</span>)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/orders&quot;</span>)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/orders/**&quot;</span>)            </span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/personal&quot;</span>)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/personal/updateInfo&quot;</span>)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/selectPayType&quot;</span>)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/payPage&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/upload/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:&quot;</span> + Constants.FILE_UPLOAD_DIC);</span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/goods-img/**&quot;</span>).addResourceLocations(<span class="string">&quot;file:&quot;</span> + Constants.FILE_UPLOAD_DIC);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åœ¨NeeBeeMallWebMvcConfigurerç±»ä¸­ï¼Œå®šä¹‰äº†å¤šä¸ªæ‹¦æˆªå™¨ï¼Œé’ˆå¯¹ç”¨æˆ·çš„urlè¯·æ±‚è·¯å¾„è¿›è¡Œæƒé™æ ¡éªŒã€‚å…¶ä¸­&#x2F;admin&#x2F;å¼€å¤´çš„è·¯ç”±éƒ½ä¼šè¢«è½¬å‘åˆ°adminLoginInterceptorè¿™ä¸ªadminæƒé™æ ¡éªŒç±»ä¸­è¿›è¡Œæ ¡éªŒã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹adminLoginInterceptorè¿™ä¸ªç±»çš„å…·ä½“æ ¡éªŒé€»è¾‘ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminLoginInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object o)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestServletPath</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        <span class="keyword">if</span> (requestServletPath.startsWith(<span class="string">&quot;/admin&quot;</span>) &amp;&amp; <span class="literal">null</span> == request.getSession().getAttribute(<span class="string">&quot;loginUser&quot;</span>)) &#123;</span><br><span class="line">            request.getSession().setAttribute(<span class="string">&quot;errorMsg&quot;</span>, <span class="string">&quot;è¯·ç™»é™†&quot;</span>);</span><br><span class="line">            response.sendRedirect(request.getContextPath() + <span class="string">&quot;/admin/login&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            request.getSession().removeAttribute(<span class="string">&quot;errorMsg&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆç®€è¦çš„åˆ†æä¸‹è¿™ä¸ªä»£ç é€»è¾‘ï¼šä»£ç ä¸­é€šè¿‡request.getRequestURIè·å–è¯·æ±‚çš„urlä¿¡æ¯ï¼Œç„¶ååˆ¤æ–­ä¸‹urlä¸­æ˜¯å¦åŒ…å«&#x2F;adminè·¯ç”±ä»¥åŠsessionä¸­æ˜¯å¦åŒ…å«loginUseræ¥åˆ¤æ–­å…¶æ˜¯å¦åº”è¯¥èµ°åˆ°ifçš„thenåˆ†æ”¯ä¸­ï¼Œå¦‚æœifæ¡ä»¶æ»¡è¶³ï¼Œåˆ™è¯´æ˜è·¯ç”±è®¿é—®éæ³•ï¼Œéœ€è¦é‡æ–°ç™»é™†ï¼Œåä¹‹åˆ™æƒé™è®¤è¯æˆåŠŸï¼Œå¯ä»¥æ‰§è¡Œè¯¥æ“ä½œã€‚<br>è¿™é‡Œå¾ˆæ˜æ˜¾æ˜¯å­˜åœ¨æƒé™ç»•è¿‡ç¼ºé™·çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯request.getRequestURIè·å–çš„è·¯ç”±ä¿¡æ¯ï¼Œæˆ‘ä»¬çŸ¥é“é€šè¿‡request.getRequestURIè·å–çš„æ˜¯ç”¨æˆ·åŸå§‹çš„è¯·æ±‚è·¯ç”±ä¿¡æ¯ï¼Œç”¨æˆ·åŸå§‹çš„ç”¨æˆ·è¯·æ±‚è·¯ç”±å¦‚æœæ²¡æœ‰ç»è¿‡ä¸€äº›å¤„ç†å®¹æ˜“æœ‰urlè·¯å¾„ç©¿è¶Šçš„é£é™©ï¼Œä¾‹å¦‚æˆ‘ä»¬æ„é€ ï¼š&#x2F;index&#x2F;..;&#x2F;adminè¿™ç±»çš„è·¯å¾„ç©¿è¶Šçš„è·¯ç”±å³å¯ç»•è¿‡ifçš„æ¡ä»¶åˆ¤æ–­ã€‚<br>ä¸‹é¢æˆ‘ä»¬æ¥ç ”ç©¶ä¸‹æ€ä¹ˆè§„åˆ™æ¥è¯†åˆ«è¿™ç±»é—®é¢˜ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ€ä¹ˆçŸ¥é“è¿™æ˜¯ä¸ªéœ€è¦adminæƒé™è®¿é—®çš„è·¯ç”±å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬æ— æ³•å‡†ç¡®è¯†åˆ«adminæƒé™è·¯ç”±ï¼Œé‚£æˆ‘ä»¬çš„è¶Šæƒåˆ†æä¹Ÿå°±æ— ä»è°ˆèµ·ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨è§„åˆ™å±‚é¢ä¼šé€šè¿‡è·¯ç”±ç‰¹å¾æ¥è¯†åˆ«ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹å¼æœ‰ç‚¹è¹©è„šï¼Œè€Œä¸”è¿™ç§ç‰¹å¾è¯†åˆ«è‚¯å®šæ— æ³•éå¸¸å‡†ç¡®çš„è¯†åˆ«çš„ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬æ€ä¹ˆå»è¯†åˆ«æ¡ä»¶åˆ¤æ–­é€»è¾‘æ˜¯å¯ä»¥è¿›è¡Œç»•è¿‡çš„å‘¢ï¼Ÿ<br>ä¸Šè¿°çš„adminæ‹¦æˆªå™¨ä»£ç å¾ˆç®€å•ï¼Œåªæ˜¯åœ¨ifé€»è¾‘ä¸­åˆ¤æ–­äº†ä¸‹æ˜¯å¦è·¯ç”±æ˜¯ä»¥&#x2F;adminå¼€å¤´ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥å†™ä¸ªç®€å•è§„åˆ™å»å¯å‘ä¸‹æ‰«æå™¨ï¼Œè®©å®ƒçŸ¥é“startswithæ˜¯ç”¨äºåˆ¤æ–­Aå­—ç¬¦ä¸²æ˜¯å¦ä»¥Bå­—ç¬¦ä¸²ä½œä¸ºèµ·å§‹ã€‚startswithä¸­çš„å­—ç¬¦ä¸²æˆ‘ä»¬ä¹Ÿå¯ä»¥è·å–å…¶å¸¸é‡å€¼ã€‚ä½†æ˜¯è¦æ˜¯å®ƒä¸ç”¨startswithå‘¢ï¼Ÿç”¨æ­£åˆ™åŒ¹é…å‘¢ï¼Ÿæˆ–åˆ™å…¶ä»–çš„ä¸€äº›åˆ¤æ–­æ–¹å¼å‘¢ï¼Ÿé‚£æˆ‘ä»¬çš„è§„åˆ™å±‚çš„è¯†åˆ«éš¾åº¦å°±å¾ˆå¤§äº†ã€‚é‚£æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥æ¯”è¾ƒå¥½çš„å¤„ç†è¿™äº›é—®é¢˜å‘¢ï¼Ÿæœ€è¿‘ä¸¤å¹´å¤§æ¨¡å‹é€æ¸ç«èµ·æ¥äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥é€šè¿‡å¤§æ¨¡å‹æ¥å¸®åŠ©æˆ‘ä»¬å¤„ç†è¿™äº›æ¶‰åŠé€»è¾‘æ¨ç†çš„ä¸€äº›é—®é¢˜å‘¢ï¼Ÿè¯´å¹²å°±å¹²ï¼Œç›®å‰Artemiså·²æ”¯æŒåŸºäºå¤§æ¨¡å‹çš„æ¼æ´åˆ†ææ¨¡å—ï¼Œåªéœ€è¦åœ¨è§„åˆ™ç¼–å†™çš„è¿›è¡Œapiè°ƒç”¨å³å¯ã€‚å…·ä½“å¯èƒ½éœ€è¦ä¸€äº›é…ç½®å¤„ç†ã€‚ä¸»è¦æ˜¯build.propertiesæ–‡ä»¶ä¸­çš„è¿™å‡ ä¸ªé…ç½®é¡¹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">model_name=deepseek-ai/DeepSeek-V2.5</span><br><span class="line">max_token=512</span><br><span class="line">temperature=0.7</span><br><span class="line">top_p=0.7</span><br><span class="line">top_k=50</span><br><span class="line">frequency_penalty=0.5</span><br><span class="line">n=1</span><br><span class="line">model_api=https://api.siliconflow.cn/v1/chat/completions</span><br></pre></td></tr></table></figure>
<p>model_apiæ˜¯æˆ‘ä»¬å¯¹æ¥çš„çº¿ä¸Šå¤§æ¨¡å‹å¹³å°åœ°å€(æˆ‘çš„é‚€è¯·ç æ˜¯ï¼šRHiwUmRu)ï¼Œè¦ä½¿ç”¨å¤§æ¨¡å‹åŠŸèƒ½ï¼Œä½ éœ€è¦å…ˆå»siliconflowè¿™ä¸ªå¹³å°æ³¨å†Œä¸€ä¸ªå¸å·(æ–°ç”¨æˆ·æœ‰2000wçš„å…è´¹token)ï¼Œç„¶åï¼Œä½ éœ€è¦å°†ä½ çš„api-tokenä½œä¸ºå‚æ•°ä¼ å…¥åˆ°å¤§æ¨¡å‹åˆ†ææ¨¡å—ä¸­ï¼Œå…·ä½“æ€ä¹ˆç”¨åé¢ä¼šè¯´åˆ°ã€‚model_nameæ˜¯æˆ‘ä»¬æŒ‡å®šçš„æ¨¡å‹åç§°ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯å…è´¹çš„deepseek-ai&#x2F;DeepSeek-V2.5ï¼Œå½“ç„¶ä½ çš„é¢„ç®—å……è¶³ä¹Ÿå¯ä»¥ä½¿ç”¨æ»¡è¡€ç‰ˆçš„ã€‚å…¶ä»–å‚æ•°å¯æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œè°ƒæ•´ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚<br>ä¸‹é¢ï¼Œæˆ‘ä»¬ç”¨artQLæ¥ç¼–å†™ä¸€ä¸ªè¶Šæƒæ¼æ´è¯†åˆ«æ¨¡å—ï¼Œæ¥è¯†åˆ«ä¸‹è¿™ç±»çš„åœ¨æ‹¦æˆªå™¨ä¸­å­˜åœ¨æƒé™æ ¡éªŒç¼ºé™·çš„é—®é¢˜ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„è¶Šæƒæ£€æµ‹è§„åˆ™</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c-rule</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>ai-overstep-rule2<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>è¶Šæƒæ¼æ´<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                &lt;![<span class="variable constant_">CDATA</span>[</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">println</span>(<span class="string">&quot;ai-overstep-rule2 analyze start&quot;</span>) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    val <span class="attr">knowledge</span>:<span class="title class_">String</span> = <span class="string">&quot;/index/..;/adminè¿™ç±»çš„è·¯ç”±ä¼šè¢«getRequestURIè¯†åˆ«ä¸º/index/..;/adminï¼Œå¯èƒ½ä¼šç»•è¿‡ä¸€äº›æ‹¦æˆªå™¨çš„é€»è¾‘åˆ¤æ–­ï¼Œåº”ä½¿ç”¨getServletPathè¿›è¡Œè·å–ã€‚&quot;</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    val <span class="attr">system_prompt</span>:<span class="title class_">String</span> = <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„ä»£ç å®‰å…¨åˆ†æä¸“å®¶ï¼Œè¯·æ·±å…¥åˆ†æä»¥ä¸‹ä»£ç çš„å®‰å…¨æ€§ï¼Œå¹¶ç»™å‡ºä¿®å¤æ–¹æ¡ˆ(å°½é‡ç®€çŸ­)ã€‚å›å¤å†…å®¹çš„æœ€åä¸€ä¸ªä¸­æ–‡å­—è¯·ç”¨äºæ ‡è®°æ˜¯å¦è¯¯æŠ¥ï¼Œè‹¥è¯¯æŠ¥åˆ™æ ‡&#x27;å‡&#x27;ï¼Œåä¹‹&#x27;çœŸ&#x27;ã€‚&quot;</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    val md_interceptor_handler = db.<span class="property">method</span>.<span class="title function_">where</span>(_.<span class="property">name</span> == <span class="string">&quot;preHandle&quot;</span>).<span class="property">where</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      <span class="function"><span class="params">it</span>=&gt;</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                        it.<span class="property">params</span>.<span class="title function_">count</span>(_.<span class="property">typeName</span>==<span class="string">&quot;HttpServletRequest&quot;</span>)&gt;<span class="number">0</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    val md_interceptor_config = db.<span class="property">method</span>.<span class="title function_">where</span>(_.<span class="property">name</span> == <span class="string">&quot;addInterceptors&quot;</span>).<span class="property">where</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      <span class="function"><span class="params">it</span>=&gt;</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                        it.<span class="property">params</span>.<span class="title function_">count</span>(_.<span class="property">typeName</span> == <span class="string">&quot;InterceptorRegistry&quot;</span>)&gt;<span class="number">0</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(md_interceptor_config.<span class="property">nonEmpty</span> &amp;&amp; md_interceptor_handler.<span class="property">nonEmpty</span>) &#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      val pt = <span class="keyword">new</span> <span class="title class_">PromptTPL</span>() &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      pt.<span class="property">user_prompt</span> = s<span class="string">&quot;è¯·é—®ä»¥ä¸‹ä»£ç å­˜åœ¨è¶Šæƒæ¼æ´å—ï¼Ÿ\n$&#123;md_interceptor_handler.head.code&#125;&quot;</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      pt.<span class="property">knowledge_prompt</span> = knowledge &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      pt.<span class="property">system_prompt</span> = system_prompt &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      pt.<span class="property">token</span> = <span class="title class_">Source</span>.<span class="title function_">fromFile</span>(<span class="string">&quot;/Users/pony/Desktop/zsd/å·¥ä½œèµ„æ–™/data/api_secrete.txt&quot;</span>).<span class="property">mkString</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      val res = pt.<span class="property">query</span>.<span class="property">content</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      <span class="keyword">if</span>(res.<span class="property">nonEmpty</span>) &#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(res.<span class="property">get</span>.<span class="title function_">endsWith</span>(<span class="string">&quot;çœŸ&quot;</span>))&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                          <span class="title function_">println</span>(<span class="string">&quot;å‘ç°æ¼æ´&quot;</span>) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                          <span class="title class_">Report</span>.<span class="property">flaws</span>.<span class="title function_">addOne</span>(<span class="keyword">new</span> <span class="title function_">FLAW</span>( &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                            name = <span class="string">&quot;è¶Šæƒæ¼æ´&quot;</span>, checker_name = <span class="string">&quot;ai-overstep-rule1&quot;</span>, &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                            trace = <span class="title class_">Array</span>.<span class="property">empty</span>, desc = res.<span class="property">get</span>, level = <span class="string">&quot;high&quot;</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                          )) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                        &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">println</span>(<span class="string">&quot;ai-overstep-rule2 analyze end&quot;</span>) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    ]]&gt;</span></span><br><span class="line"><span class="language-javascript">            </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">c-rule</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å¤§ä½“è¯´ä¸‹è¿™ä¸ªåŸºäºå¤§æ¨¡å‹çš„æ¼æ´æ£€æµ‹è§„åˆ™çš„ç¼–å†™æ€è·¯ï¼šé¦–å…ˆæˆ‘ä»¬éœ€è¦è·å–æ‹¦æˆªå™¨é…ç½®çš„æºç ï¼Œä»¥åŠæ‹¦æˆªå™¨å®šä¹‰çš„æºç ï¼Œè¿™éƒ¨åˆ†æ“ä½œæˆ‘ä»¬å¯ä»¥è°ƒç”¨artQLçš„æ¨¡å—è¿›è¡Œè·å–ï¼Œç„¶åæˆ‘ä»¬å†æ·»åŠ ä¸€äº›promptï¼ŒpromptåŒ…æ‹¬ä¸€äº›å¿…è¦çš„å®‰å…¨çŸ¥è¯†(å®æµ‹è¿‡ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æ·»åŠ è¿™äº›å®‰å…¨çŸ¥è¯†çš„è¯ï¼Œå¤§æ¨¡å‹æ˜¯æ— æ³•å‡†ç¡®çš„è¯†åˆ«åˆ°è¿™ä¸ªé—®é¢˜çš„ã€‚)ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/index/..;/adminè¿™ç±»çš„è·¯ç”±ä¼šè¢«getRequestURIè¯†åˆ«ä¸º/index/..;/adminï¼Œå¯èƒ½ä¼šç»•è¿‡ä¸€äº›æ‹¦æˆªå™¨çš„é€»è¾‘åˆ¤æ–­ï¼Œåº”ä½¿ç”¨getServletPathè¿›è¡Œè·å–ã€‚</span><br></pre></td></tr></table></figure>
<p>æœ€åæˆ‘ä»¬è°ƒç”¨å¤§æ¨¡å‹åˆ†ææ¨¡å—PromptTPLï¼Œå°†æ‰€æœ‰çš„è¾“å…¥å‚æ•°ä¼ å…¥åˆ°æ¨¡å—ä¸­å³å¯ç­‰å¾…åˆ†æç»“æœã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„æœ€ç»ˆåˆ†ææŠ¥å‘Šï¼š<br>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è¶Šæƒæ¼æ´&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;checker_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ai-overstep-rule1&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;trace&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;desc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;è¯¥ä»£ç å­˜åœ¨è¶Šæƒæ¼æ´ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ ç±»ä¼¼`/index/..;/admin`çš„è¯·æ±‚è·¯å¾„ç»•è¿‡`startsWith(\&quot;/admin\&quot;)`çš„æ£€æŸ¥ï¼Œä»è€Œè®¿é—®å—ä¿æŠ¤çš„`/admin`è·¯å¾„ã€‚\n\n**ä¿®å¤æ–¹æ¡ˆï¼š**\nä½¿ç”¨`request.getServletPath()`æ›¿ä»£`request.getRequestURI()`æ¥è·å–è¯·æ±‚è·¯å¾„ï¼Œç¡®ä¿è·¯å¾„è§£æçš„æ­£ç¡®æ€§ã€‚\n\nä¿®å¤åçš„ä»£ç å¦‚ä¸‹ï¼š\n```java\n@Override\npublic boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object o) throws Exception &#123;\n    String requestServletPath \u003d request.getServletPath(); // ä½¿ç”¨getServletPathè·å–è·¯å¾„\n    if (requestServletPath.startsWith(\&quot;/admin\&quot;) \u0026\u0026 null \u003d\u003d request.getSession().getAttribute(\&quot;loginUser\&quot;)) &#123;\n        request.getSession().setAttribute(\&quot;errorMsg\&quot;, \&quot;è¯·ç™»é™†\&quot;);\n        response.sendRedirect(request.getContextPath() + \&quot;/admin/login\&quot;);\n        return false;\n    &#125; else &#123;\n        request.getSession().removeAttribute(\&quot;errorMsg\&quot;);\n        return true;\n    &#125;\n&#125;\n```\nçœŸ&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;level&quot;</span><span class="punctuation">:</span> <span class="string">&quot;high&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ç»“æœçš„æè¿°ä¿¡æ¯å¦‚ä¸‹ï¼š<br>è¯¥ä»£ç å­˜åœ¨è¶Šæƒæ¼æ´ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ ç±»ä¼¼<code>/index/..;/admin</code>çš„è¯·æ±‚è·¯å¾„ç»•è¿‡<code>startsWith(&quot;/admin&quot;)</code>çš„æ£€æŸ¥ï¼Œä»è€Œè®¿é—®å—ä¿æŠ¤çš„<code>/admin</code>è·¯å¾„ã€‚</p>
<p><strong>ä¿®å¤æ–¹æ¡ˆï¼š</strong><br>ä½¿ç”¨<code>request.getServletPath()</code>æ›¿ä»£<code>request.getRequestURI()</code>æ¥è·å–è¯·æ±‚è·¯å¾„ï¼Œç¡®ä¿è·¯å¾„è§£æçš„æ­£ç¡®æ€§ã€‚</p>
<p>ä¿®å¤åçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object o)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">requestServletPath</span> <span class="operator">=</span> request.getServletPath(); <span class="comment">// ä½¿ç”¨getServletPathè·å–è·¯å¾„</span></span><br><span class="line">    <span class="keyword">if</span> (requestServletPath.startsWith(<span class="string">&quot;/admin&quot;</span>) &amp;&amp; <span class="literal">null</span> == request.getSession().getAttribute(<span class="string">&quot;loginUser&quot;</span>)) &#123;</span><br><span class="line">        request.getSession().setAttribute(<span class="string">&quot;errorMsg&quot;</span>, <span class="string">&quot;è¯·ç™»é™†&quot;</span>);</span><br><span class="line">        response.sendRedirect(request.getContextPath() + <span class="string">&quot;/admin/login&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        request.getSession().removeAttribute(<span class="string">&quot;errorMsg&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">çœŸ</span><br></pre></td></tr></table></figure>
<p>ä»ç»“æœä¸Šæ¥çœ‹ï¼Œdeepseekçš„é€»è¾‘æ¨ç†èƒ½åŠ›è¿˜æ˜¯éå¸¸ä¸é”™çš„ï¼Œå¦å¤–å®ƒè¿˜èƒ½å¤Ÿè‡ªåŠ¨çš„ç»™å‡ºç›¸åº”çš„ä¿®å¤æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸äº®çœ¼åŠŸèƒ½ï¼Œå½“ç„¶ä¹Ÿéœ€è¦æˆ‘ä»¬é€šè¿‡ä¸€äº›promptç­–ç•¥å»å¯å‘ä»–ã€‚<br>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æ¨¡å‹è®­ç»ƒï¼Œè®©å¤§æ¨¡å‹å»æŒæ¡è¿™äº›å®‰å…¨ç»•è¿‡æ‰‹æ³•ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬åœ¨è§„åˆ™ç¼–å†™çš„æ—¶å€™å¯èƒ½å°±åªéœ€è¦ç»™åˆ°ä»–éœ€è¦çš„ä»£ç å—å³å¯ã€‚</p>
<h3 id="4-2-2-newbee-mall-æ°´å¹³è¶Šæƒæ¼æ´åˆ†æ"><a href="#4-2-2-newbee-mall-æ°´å¹³è¶Šæƒæ¼æ´åˆ†æ" class="headerlink" title="4.2.2 newbee mall æ°´å¹³è¶Šæƒæ¼æ´åˆ†æ"></a>4.2.2 newbee mall æ°´å¹³è¶Šæƒæ¼æ´åˆ†æ</h3><p>æˆ‘ä»¬å†æ¥åˆ†æä¸‹è¿™ä¸ªé¡¹ç›®å¯èƒ½å­˜åœ¨çš„ä¸€äº›æ°´å¹³è¶Šæƒæ¼æ´ã€‚æˆ‘ä»¬çŸ¥é“æ°´å¹³è¶Šæƒæ¼æ´é€ æˆçš„ä¸»è¦åŸå› æ˜¯ç”¨æˆ·åœ¨è¿›è¡Œä¸€äº›æ“ä½œçš„æ—¶å€™æ²¡æœ‰è¿›è¡Œç”¨æˆ·è§’è‰²çš„æƒé™æ ¡éªŒã€‚æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨webé¡¹ç›®ä¸­ï¼Œç»å¤§å¤šæ•°çš„æ•æ„Ÿæ“ä½œéƒ½æ˜¯ä¸æ•°æ®åº“äº¤äº’ç›¸å…³ï¼Œæ‰€ä»¥è¶Šæƒçš„æ£€æµ‹æ€è·¯ï¼Œæˆ‘ä»¬ä¸å¦¨å›´ç»•æ˜¯å¦è¶Šæƒè®¿é—®æ•°æ®åº“æ“ä½œapiæ¥è¿›è¡Œåˆ†æã€‚æˆ‘ä»¬é€šè¿‡æºç åˆ†æä¸éš¾å‘ç°ï¼Œnewbeeè¿™ä¸ªé¡¹ç›®çš„æ•°æ®åº“æ“ä½œä¸»è¦æ˜¯åŸºäºibatis apiï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸å¦¨å°†ibatisçš„ä¸€äº›æ•°æ®æ“ä½œapiè®¾ç½®ä¸ºsinkç‚¹ï¼Œç„¶åå‘ä¸Šå›æº¯åˆ†ææ˜¯å¦è¿›è¡Œäº†æƒé™æ ¡éªŒã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•çŸ¥é“å“ªé‡Œè¿›è¡Œäº†æƒé™æ ¡éªŒå‘¢ï¼Ÿæ€ä¹ˆè¿›è¡Œçš„æƒé™æ ¡éªŒå‘¢ï¼Ÿè¿™å¯èƒ½éœ€è¦è§„åˆ™ç¼–å†™çš„å·¥ç¨‹å¸ˆæœ‰ä¸°å¯Œçš„ç ”å‘ç»éªŒï¼Œè¿™æ ·æ‰èƒ½å¤Ÿå¯¹å„ç§æ°´å¹³é‰´æƒæœºåˆ¶äº†ç„¶äºèƒ¸ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬åœ¨ä¸çŸ¥é“é¡¹ç›®ä¸­æ˜¯æ€ä¹ˆæ°´å¹³é‰´æƒçš„æƒ…å†µä¸‹ï¼Œè¿˜èƒ½å¤Ÿè¯†åˆ«å‡ºæ½œåœ¨çš„æ°´å¹³é‰´æƒçš„é—®é¢˜å‘¢ï¼Ÿé‚£æˆ‘ä»¬è¿˜æ˜¯å°†è¿™ä¸ªé—®é¢˜ä¸¢ç»™å¤§æ¨¡å‹å§ã€‚è¿™é‡Œå…·ä½“çš„åšæ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†webå…¥å£åˆ°sqlæ“ä½œapiä¹‹é—´çš„è°ƒç”¨é“¾æ¶‰åŠçš„ä»£ç å–‚ç»™å¤§æ¨¡å‹ï¼Œç„¶åç»™å‡ºé€‚å½“çš„promptè®©å¤§æ¨¡å‹ç»“åˆæˆ‘ä»¬ç»™åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å»åˆ¤æ–­å½“å‰è¿™ä¸ªæ•°æ®æµä¸‹è¿™ä¸ªsqlæ“ä½œæ˜¯å¦å­˜åœ¨æ°´å¹³è¶Šæƒé£é™©ã€‚è§„åˆ™å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c-rule</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>ai-overstep-rule1<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>è¶Šæƒæ¼æ´æ£€æµ‹<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &lt;![<span class="variable constant_">CDATA</span>[</span></span><br><span class="line"><span class="language-javascript">            val <span class="attr">system_prompt</span>:<span class="title class_">String</span> = <span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„ä»£ç å®‰å…¨åˆ†æä¸“å®¶ï¼Œè¯·æ·±å…¥åˆ†æä»¥ä¸‹ä»£ç çš„å®‰å…¨æ€§ï¼Œå¹¶ç»™å‡ºä¿®å¤æ–¹æ¡ˆ(å°½é‡ç®€çŸ­)ã€‚å›å¤çš„æœ€åä¸€ä¸ªå­—è¯·ç”¨äºæ ‡è®°æ˜¯å¦è¯¯æŠ¥ï¼Œè‹¥è¯¯æŠ¥åˆ™æ ‡&#x27;å‡&#x27;ï¼Œåä¹‹æ ‡&#x27;çœŸ&#x27;ã€‚&quot;</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            val sinks=db.<span class="property">call</span>.<span class="property">where</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">              <span class="function"><span class="params">it</span>=&gt;</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                it.<span class="property">name</span>.<span class="title function_">contains</span>(<span class="string">&quot;deleteByPrimaryKey&quot;</span>) || it.<span class="property">name</span>.<span class="title function_">contains</span>(<span class="string">&quot;selectByPrimaryKey&quot;</span>) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">              &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            val <span class="attr">md_list</span>:<span class="title class_">ListBuffer</span>[<span class="title class_">MethodDecl</span>]=<span class="keyword">new</span> <span class="title class_">ListBuffer</span>[<span class="title class_">MethodDecl</span>] &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            sinks.<span class="property">foreach</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">              <span class="function"><span class="params">it</span>=&gt;</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span>(it.<span class="property">method</span>!=<span class="literal">null</span> &amp;&amp; !md_list.<span class="title function_">contains</span>(it.<span class="property">method</span>))&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                  md_list.<span class="title function_">addOne</span>(it.<span class="property">method</span>) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">              &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//å¯¹æ‰€æœ‰methodè¿›è¡Œè°ƒç”¨é“¾åˆ†æ &lt;br&gt;</span></span></span><br><span class="line"><span class="language-javascript">            val cg = <span class="keyword">new</span> <span class="title class_">CallGraphAnalyze</span>() &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            val chains=md_list.<span class="property">flatMap</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">              <span class="function"><span class="params">it</span>=&gt;</span>&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                cg.<span class="title function_">fetch_call_chains</span>(method = it) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">              &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(chains.<span class="property">nonEmpty</span>)&#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> <span class="attr">code_snippet</span>:<span class="title class_">String</span>=chains.<span class="property">last</span>.<span class="property">methods</span>.<span class="title function_">map</span>(_.<span class="property">code</span>).<span class="title function_">mkString</span>(<span class="string">&quot;\n&quot;</span>) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                val pt = <span class="keyword">new</span> <span class="title class_">PromptTPL</span>() &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                pt.<span class="property">user_prompt</span> = s<span class="string">&quot;è¯·é—®ä»¥ä¸‹ä»£ç å­˜åœ¨è¶Šæƒæ¼æ´å—ï¼Ÿ\n$&#123;code_snippet&#125;&quot;</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                pt.<span class="property">knowledge_prompt</span> = <span class="string">&quot;&quot;</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                pt.<span class="property">system_prompt</span> = system_prompt &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                pt.<span class="property">token</span> = <span class="title class_">Source</span>.<span class="title function_">fromFile</span>(<span class="string">&quot;/Users/pony/Desktop/zsd/å·¥ä½œèµ„æ–™/data/api_secrete.txt&quot;</span>).<span class="property">mkString</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                val res = pt.<span class="property">query</span>.<span class="property">content</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">nonEmpty</span>) &#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                  <span class="keyword">if</span> (res.<span class="property">get</span>.<span class="title function_">endsWith</span>(<span class="string">&quot;çœŸ&quot;</span>)) &#123; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">println</span>(<span class="string">&quot;å‘ç°æ¼æ´&quot;</span>) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">println</span>(res.<span class="property">get</span>) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title class_">Report</span>.<span class="property">flaws</span>.<span class="title function_">addOne</span>(<span class="keyword">new</span> <span class="title function_">FLAW</span>( &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      name = <span class="string">&quot;è¶Šæƒæ¼æ´&quot;</span>, checker_name = <span class="string">&quot;ai-overstep-rule1&quot;</span>, &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                      trace = <span class="title class_">Array</span>.<span class="property">empty</span>, desc = res.<span class="property">get</span>, level = <span class="string">&quot;high&quot;</span> &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                    )) &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                  &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">                &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">            &#125; &lt;br&gt;</span></span><br><span class="line"><span class="language-javascript">        ]]&gt;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">c-rule</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯æ£€å‡ºæŠ¥å‘Šï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;name&quot;: &quot;è¶Šæƒæ¼æ´&quot;,</span><br><span class="line">	&quot;checker_name&quot;: &quot;ai-overstep-rule1&quot;,</span><br><span class="line">	&quot;trace&quot;: [],</span><br><span class="line">	&quot;desc&quot;: &quot;ä»£ç å­˜åœ¨è¶Šæƒæ¼æ´ã€‚`getOrderItems`æ–¹æ³•ç›´æ¥æ ¹æ®ä¼ å…¥çš„`id`æŸ¥è¯¢è®¢å•ä¿¡æ¯ï¼Œä½†æ²¡æœ‰éªŒè¯å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®è¯¥è®¢å•ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„è¯·æ±‚ï¼Œè·å–å…¶ä»–ç”¨æˆ·çš„è®¢å•ä¿¡æ¯ã€‚\n\n**ä¿®å¤æ–¹æ¡ˆï¼š**\nåœ¨`getOrderItems`æ–¹æ³•ä¸­æ·»åŠ ç”¨æˆ·æƒé™éªŒè¯ï¼Œç¡®ä¿æŸ¥è¯¢çš„è®¢å•å±äºå½“å‰ç™»å½•ç”¨æˆ·ã€‚\n\n```java\n@Override\npublic List\u003cNewBeeMallOrderItemVO\u003e getOrderItems(Long id, Long userId) &#123;\n    NewBeeMallOrder newBeeMallOrder \u003d newBeeMallOrderMapper.selectByPrimaryKey(id);\n    if (newBeeMallOrder !\u003d null \u0026\u0026 newBeeMallOrder.getUserId().equals(userId)) &#123; // éªŒè¯è®¢å•æ˜¯å¦å±äºå½“å‰ç”¨æˆ·\n        List\u003cNewBeeMallOrderItem\u003e orderItems \u003d newBeeMallOrderItemMapper.selectByOrderId(newBeeMallOrder.getOrderId());\n        if (!CollectionUtils.isEmpty(orderItems)) &#123;\n            List\u003cNewBeeMallOrderItemVO\u003e newBeeMallOrderItemVOS \u003d BeanUtil.copyList(orderItems, NewBeeMallOrderItemVO.class);\n            return newBeeMallOrderItemVOS;\n        &#125;\n    &#125;\n    return null;\n&#125;\n```\n\nåœ¨æ§åˆ¶å™¨ä¸­è°ƒç”¨`getOrderItems`æ—¶ï¼Œä¼ å…¥å½“å‰ç™»å½•ç”¨æˆ·çš„`userId`ï¼š\n\n```java\n@GetMapping(\&quot;/order-items/&#123;id&#125;\&quot;)\n@ResponseBody\npublic Result info(@PathVariable(\&quot;id\&quot;) Long id, @RequestAttribute(\&quot;userId\&quot;) Long userId) &#123; // è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„userId\n    List\u003cNewBeeMallOrderItemVO\u003e orderItems \u003d newBeeMallOrderService.getOrderItems(id, userId);\n    if (!CollectionUtils.isEmpty(orderItems)) &#123;\n        return ResultGenerator.genSuccessResult(orderItems);\n    &#125;\n    return ResultGenerator.genFailResult(ServiceResultEnum.DATA_NOT_EXIST.getResult());\n&#125;çœŸ&quot;,</span><br><span class="line">	&quot;level&quot;: &quot;high&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>descå†…å®¹å‹å¥½å±•ç¤ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">ä»£ç å­˜åœ¨è¶Šæƒæ¼æ´ã€‚`getOrderItems`æ–¹æ³•ç›´æ¥æ ¹æ®ä¼ å…¥çš„`id`æŸ¥è¯¢è®¢å•ä¿¡æ¯ï¼Œä½†æ²¡æœ‰éªŒè¯å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®è¯¥è®¢å•ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„è¯·æ±‚ï¼Œè·å–å…¶ä»–ç”¨æˆ·çš„è®¢å•ä¿¡æ¯ã€‚</span><br><span class="line"></span><br><span class="line">**ä¿®å¤æ–¹æ¡ˆï¼š**</span><br><span class="line">åœ¨`getOrderItems`æ–¹æ³•ä¸­æ·»åŠ ç”¨æˆ·æƒé™éªŒè¯ï¼Œç¡®ä¿æŸ¥è¯¢çš„è®¢å•å±äºå½“å‰ç™»å½•ç”¨æˆ·ã€‚</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public List&lt;NewBeeMallOrderItemVO&gt; getOrderItems(Long id, Long userId) &#123;</span><br><span class="line">    NewBeeMallOrder newBeeMallOrder = newBeeMallOrderMapper.selectByPrimaryKey(id);</span><br><span class="line">    if (newBeeMallOrder != null &amp;&amp; newBeeMallOrder.getUserId().equals(userId)) &#123; // éªŒè¯è®¢å•æ˜¯å¦å±äºå½“å‰ç”¨æˆ·</span><br><span class="line">        List&lt;NewBeeMallOrderItem&gt; orderItems = newBeeMallOrderItemMapper.selectByOrderId(newBeeMallOrder.getOrderId());</span><br><span class="line">        if (!CollectionUtils.isEmpty(orderItems)) &#123;</span><br><span class="line">            List&lt;NewBeeMallOrderItemVO&gt; newBeeMallOrderItemVOS = BeanUtil.copyList(orderItems, NewBeeMallOrderItemVO.class);</span><br><span class="line">            return newBeeMallOrderItemVOS;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">åœ¨æ§åˆ¶å™¨ä¸­è°ƒç”¨`getOrderItems`æ—¶ï¼Œä¼ å…¥å½“å‰ç™»å½•ç”¨æˆ·çš„`userId`ï¼š</span><br><span class="line"></span><br><span class="line">@GetMapping(&quot;/order-items/&#123;id&#125;&quot;)</span><br><span class="line">@ResponseBody</span><br><span class="line">public Result info(@PathVariable(&quot;id&quot;) Long id, @RequestAttribute(&quot;userId&quot;) Long userId) &#123; // è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„userId</span><br><span class="line">    List&lt;NewBeeMallOrderItemVO&gt; orderItems = newBeeMallOrderService.getOrderItems(id, userId);</span><br><span class="line">    if (!CollectionUtils.isEmpty(orderItems)) &#123;</span><br><span class="line">        return ResultGenerator.genSuccessResult(orderItems);</span><br><span class="line">    &#125;</span><br><span class="line">    return ResultGenerator.genFailResult(ServiceResultEnum.DATA_NOT_EXIST.getResult());</span><br><span class="line">&#125;çœŸ</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°é—®é¢˜å¯¹åº”çš„æ¼æ´æºç æ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯¦æƒ…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/order-items/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">info</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">    List&lt;NewBeeMallOrderItemVO&gt; orderItems = newBeeMallOrderService.getOrderItems(id);</span><br><span class="line">    <span class="keyword">if</span> (!CollectionUtils.isEmpty(orderItems)) &#123;</span><br><span class="line">        <span class="keyword">return</span> ResultGenerator.genSuccessResult(orderItems);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ResultGenerator.genFailResult(ServiceResultEnum.DATA_NOT_EXIST.getResult());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;NewBeeMallOrderItemVO&gt; <span class="title function_">getOrderItems</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">    <span class="type">NewBeeMallOrder</span> <span class="variable">newBeeMallOrder</span> <span class="operator">=</span> newBeeMallOrderMapper.selectByPrimaryKey(id);</span><br><span class="line">    <span class="keyword">if</span> (newBeeMallOrder != <span class="literal">null</span>) &#123;</span><br><span class="line">        List&lt;NewBeeMallOrderItem&gt; orderItems = newBeeMallOrderItemMapper.selectByOrderId(newBeeMallOrder.getOrderId());</span><br><span class="line">        <span class="comment">//è·å–è®¢å•é¡¹æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (!CollectionUtils.isEmpty(orderItems)) &#123;</span><br><span class="line">            List&lt;NewBeeMallOrderItemVO&gt; newBeeMallOrderItemVOS = BeanUtil.copyList(orderItems, NewBeeMallOrderItemVO.class);</span><br><span class="line">            <span class="keyword">return</span> newBeeMallOrderItemVOS;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¤§æ¦‚åˆ†æä¸‹æºç ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™é‡Œæ˜¯å­˜åœ¨æ°´å¹³è¶Šæƒæ¼æ´çš„ã€‚å› ä¸ºå…¶åœ¨è¿›è¡Œsqlæ“ä½œnewBeeMallOrderMapper.selectByPrimaryKey(id)çš„æ—¶å€™æ²¡æœ‰è¿›è¡Œç”¨æˆ·æƒé™çš„åˆ¤å®šã€‚è¯´æ˜å¤§æ¨¡å‹çš„æ¨æ–­è¿˜æ˜¯æ¯”è¾ƒé è°±çš„ã€‚è€Œè¿™é‡Œå¤§æ¨¡å‹ç»™åˆ°çš„ä¿®å¤æ–¹æ¡ˆæ˜¯ä»æ•°æ®åº“æŸ¥è¯¢å‡ºæ¥çš„useridå’Œç”¨æˆ·ç»™çš„useridè¿›è¡Œæ¯”è¾ƒï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿokã€‚å½“ç„¶ä»–è¿™ä¸ªç³»ç»Ÿä¸­å…¶ä»–é€»è¾‘ä»£ç ä¸­è¿›è¡Œæ°´å¹³é‰´æƒä¸»è¦æ˜¯ä»sessionä¸­è·å–useridï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä¸€ç§åŠæ³•ã€‚</p>
<h1 id="äº”ã€ä½¿ç”¨Artemisè¿›è¡Œmræ‰«æ"><a href="#äº”ã€ä½¿ç”¨Artemisè¿›è¡Œmræ‰«æ" class="headerlink" title="äº”ã€ä½¿ç”¨Artemisè¿›è¡Œmræ‰«æ"></a>äº”ã€ä½¿ç”¨Artemisè¿›è¡Œmræ‰«æ</h1><h2 id="5-1-ä»€ä¹ˆæ˜¯mræ‰«æä»¥åŠä¸ºä»€ä¹ˆè¦è¿›è¡Œmræ‰«æ"><a href="#5-1-ä»€ä¹ˆæ˜¯mræ‰«æä»¥åŠä¸ºä»€ä¹ˆè¦è¿›è¡Œmræ‰«æ" class="headerlink" title="5.1 ä»€ä¹ˆæ˜¯mræ‰«æä»¥åŠä¸ºä»€ä¹ˆè¦è¿›è¡Œmræ‰«æ"></a>5.1 ä»€ä¹ˆæ˜¯mræ‰«æä»¥åŠä¸ºä»€ä¹ˆè¦è¿›è¡Œmræ‰«æ</h2><p>mræ‰«æï¼Œå³merge requestæ‰«æï¼ŒæŒ‡åœ¨è¿›è¡Œåˆ†æ”¯åˆå¹¶çš„æ—¶å€™è¿›è¡Œä»£ç å®‰å…¨æ‰«æã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨è¿™ä¸ªç¯èŠ‚ä¸­è¿›è¡Œæ‰«æï¼Œæˆ‘ä»¬æœŸæœ›æ˜¯èƒ½å¤Ÿè¯†åˆ«å‡ºé¡¹ç›®çš„ä¸€äº›å¢é‡æ¼æ´ã€‚å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›åœ¨è¿™ä¸ªç¯èŠ‚ä¸­çš„æ‰«æèƒ½å¤Ÿæ›´å¿«é€Ÿä¸€äº›ï¼Œè¿™æ ·ä¸è‡³äºå¡ä½æˆ‘ä»¬çš„ä»£ç åˆå¹¶ï¼Œæ¯•ç«Ÿæœ‰æ—¶å€™æƒ³è¦ä¸Šçº¿æŸä¸ªåŠŸèƒ½çš„å¿ƒæƒ…æ˜¯å¾ˆè¿«åˆ‡çš„ï¼Œä½†æ˜¯è¢«æ‰«ææ—¶é—´å¡ä½ï¼Œåˆ™æ˜¯ä¸€ç§éå¸¸ä¸å¥½çš„ä½“éªŒã€‚<br>ç°åœ¨ï¼Œå¾ˆå¤šå›¢é˜Ÿåœ¨å¢é‡æ¼æ´è¯†åˆ«æ–¹é¢éƒ½èƒ½å¤Ÿæœ‰æ¯”è¾ƒä¸é”™çš„å®è·µï¼Œä¾‹å¦‚åŸºäºä¸€äº›æ¼æ´ç®¡ç†å¹³å°é’ˆå¯¹ä¸åŒä»£ç ç‰ˆæœ¬è¿›è¡Œçš„new codeè®¡ç®—å¾—å‡ºçš„å¢é‡æ¼æ´è¯†åˆ«æ–¹æ³•ï¼Œä½†æ˜¯ï¼Œåœ¨ä»£ç æ‰«æå±‚é¢å®ç°å¢é‡å´æ²¡æœ‰å‘ç°å¤ªå¤šæœ‰ç›¸å…³çš„è½åœ°å®è·µã€‚æ¢ç©¶å…¶åŸå› å‘¢ï¼Œæˆ‘è®¤ä¸ºæœ‰ä»¥ä¸‹å‡ ä¸ªä¸»è¦åŸå› ï¼Œç¬¬ä¸€ä¸ªæ˜¯æœ‰äº›å•†ä¸šæ‰«æå™¨æ˜¯æ”¯æŒmræ‰«æçš„ï¼Œä½†æ˜¯ç”±äºå®˜æ–¹çš„æŠ€æœ¯å¸®åŠ©æ–‡æ¡£æ¯”è¾ƒç²—ç³™ï¼Œä»¥åŠä¸­å›½åŒºæ”¯æŒäººå‘˜é’ˆå¯¹æ­¤ç±»å®è·µçš„æ”¯æŒä¸å¤Ÿåˆ°ä½ï¼Œä½¿å¾—å¾ˆå¤šå…¬å¸çš„sdlå·¥ç¨‹å¸ˆéƒ½å¾ˆéš¾è½åœ°å®è·µmræ‰«æï¼›ç¬¬äºŒä¸ªæ˜¯ä¸€äº›é”™è¯¯çš„è¨€è®ºåœ¨ç½‘ä¸Šè¯¯å¯¼ä¸€äº›sdlå·¥ç¨‹å¸ˆï¼Œä½¿å…¶è®¤ä¸ºmræ‰«ææ˜¯ä¸€ç§ç¼ºä¹å‡†ç¡®æ€§çš„æ‰«æå®è·µï¼›ç¬¬ä¸‰ä¸ªæ˜¯è´­ä¹°çš„ä»£ç æ‰«æå™¨æœ¬èº«ä¸æ”¯æŒmræ‰«æï¼Œä¾‹å¦‚è¯¸å¤šå›½äº§çš„ä»£ç å®‰å…¨æ‰«æäº§å“ã€‚<br>ä¸ºäº†èƒ½å¤Ÿè§£å†³è¿™ä¸€éš¾é¢˜ï¼ŒArtemisé™æ€ä»£ç å®‰å…¨æ‰«æå™¨åœ¨è®¾è®¡ä¹‹åˆå°±è€ƒè™‘åˆ°äº†è¿™ç‚¹ï¼Œæ‰€ä»¥ä»æ¶æ„æ–¹é¢æˆ‘å°±åŠªåŠ›æœç€èƒ½å¤Ÿæ›´åŠ å®¹æ˜“è¿›è¡Œmræ‰«ææ–¹å‘è®¾è®¡ã€‚ä¸‹é¢ï¼Œæˆ‘ä¸ºå¤§å®¶è®²è§£ä¸‹Artemisçš„mræ‰«æçš„åŸç†ä»¥åŠå…·ä½“çš„å®é™…åº”ç”¨ã€‚<br>è¦è®²æ¸…æ¥š Artemis mræ‰«æçš„åŸç†ï¼Œé¦–å…ˆï¼Œæˆ‘è¯´æ˜ä¸‹ï¼Œartemisåœ¨ç¼–è¯‘æ—¶æ•è·çš„æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œä»¥åŠäº§å‡ºç‰©æ˜¯ä»€ä¹ˆã€‚<br>artemisåœ¨ç¼–è¯‘æ—¶ä¼šä»¥æºç æ–‡ä»¶ä¸ºå•å…ƒï¼Œè¿›è¡Œç±»å‹ä¿¡æ¯ã€astç»“æ„ä¿¡æ¯ã€æ§åˆ¶æµä¿¡æ¯ã€æ•°æ®æµæŒ‡å‘ä¿¡æ¯æ•è·ï¼Œç„¶åå°†è¿™äº›æ•è·çš„ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨ï¼Œä½œä¸ºartemisçš„ç¼–è¯‘äº§å‡ºç‰©ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬æ•è·çš„è¯­ä¹‰ä¿¡æ¯ä¸ä¾èµ–å¤–éƒ¨çš„ä¿¡æ¯ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä»£ç è¯­ä¹‰ä¿¡æ¯å¢é‡æ•è·å¾—ä»¥å®ç°çš„åŸºæœ¬å‰æã€‚<br>é‚£ä¹ˆartemisæ˜¯å¦‚ä½•è¿›è¡Œå¢é‡è¯­ä¹‰ä¿¡æ¯æ•è·çš„å‘¢ï¼Ÿé¦–å…ˆï¼Œartemisä¼šå…ˆå¯¹å…¨é‡çš„ä»£ç ä¿¡æ¯è¿›è¡Œhashè®°å½•ï¼Œä¿å­˜åœ¨source.txtä¸­ï¼Œç„¶åæˆ‘ä»¬åœ¨è¿›è¡Œå¢é‡æ•è·çš„æ—¶å€™ï¼Œä¼šé€šè¿‡è¿™ä¸ªæ–‡ä»¶è¿›è¡Œhashæ¯”å¯¹ï¼Œä»è€Œè®¡ç®—å‡ºéœ€è¦è¿›è¡Œç¼–è¯‘æ•è·çš„æ–‡ä»¶ã€‚æˆ‘ä»¬è®¡ç®—å‡ºæœ‰å¢é‡ä¿®æ”¹çš„æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å°±ä¸å¿…æ‰€æœ‰ä»£ç æ–‡ä»¶éƒ½è¿›è¡Œæ•è·äº†ï¼Œåªéœ€è¦æ•è·è¿™äº›æ–‡ä»¶å³å¯ï¼Œè€Œä¸”æˆ‘ä»¬çš„artemisæ‰«æå™¨çš„è¯­ä¹‰ä¿¡æ¯ä¸ä¾èµ–å¤–éƒ¨çš„æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œä¸å­˜åœ¨ä»€ä¹ˆè¯­ä¹‰ä¿¡æ¯æŸå¤±çš„è¯´æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦å°†åŸæ¥æ•è·çš„è¯­ä¹‰ä¿¡æ¯æ‹·è´è¿‡æ¥ï¼Œå°†å¢é‡çš„æ–‡ä»¶è¿›è¡Œè¯­ä¹‰ä¿¡æ¯æ•è·ï¼Œå¹¶æ›¿æ¢æ‰åŸæ¥å¯¹åº”çš„è¯­ä¹‰æ–‡ä»¶å³å¯ã€‚<br>è¿™ä¸€è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹çš„ç¤ºæ„å›¾è¿›è¡Œè¡¨ç¤ºï¼š<br><img src="/images/mr.png" alt="æ•è·"></p>
<h2 id="5-2-ä½¿ç”¨artemisè¿›è¡Œmræ‰«æ"><a href="#5-2-ä½¿ç”¨artemisè¿›è¡Œmræ‰«æ" class="headerlink" title="5.2 ä½¿ç”¨artemisè¿›è¡Œmræ‰«æ"></a>5.2 ä½¿ç”¨artemisè¿›è¡Œmræ‰«æ</h2><p>æˆ‘ä»¬ä»¥ä¸€ä¸ªcaseä¸ºä¾‹æ¼”ç¤ºä¸‹å¦‚ä½•ä½¿ç”¨artemisè¿›è¡Œå¢é‡ä»£ç æ‰«æã€‚<br>æˆ‘ä»¬ä»¥owapsçš„è¿™ä¸ªbenchmarkæ–‡ä»¶ä¸ºä¾‹ï¼š<a target="_blank" rel="noopener" href="https://github.com/OWASP-Benchmark/BenchmarkJava">https://github.com/OWASP-Benchmark/BenchmarkJava</a><br>è¿™ä¸ªbenchmarkå¤§æ¦‚æœ‰2730ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå…¨é‡æ•è·çš„è¯ï¼Œæ˜¯éå¸¸è€—æ—¶çš„ã€‚æˆ‘ä»¬å…ˆä½¿ç”¨artemiså¯¹å…¶è¿›è¡Œå…¨é‡ä»£ç è¯­ä¹‰ä¿¡æ¯æ•è·ï¼Œçœ‹çœ‹å…¶è€—æ—¶å¦‚ä½•ï¼Ÿ<br>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å£è¿›è¡Œå…¨é‡ä»£ç æ•è·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Xss100m -Xms3096m -Xmx8044m  -jar Artemis.jar -p /Users/pony/Desktop/release/1.0.0/test/tt/BenchmarkJava  -od workspace</span><br></pre></td></tr></table></figure>
<p><img src="/images/p4.png" alt="æ•è·"><br>å¯ä»¥çœ‹åˆ°ï¼Œartemisæ•è·å…¨é‡æºç æ–‡ä»¶å¤§æ¦‚è€—æ—¶ï¼š1074sï¼Œçº¦åˆ18åˆ†é’Ÿã€‚<br>ä¸‹é¢æˆ‘ä»¬æ¥è¿›è¡Œå¢é‡ä»£ç æ•è·<br>æˆ‘ä»¬éšä¾¿ä¿®æ”¹ä¸‹ä¸€ä¸ªæ–‡ä»¶çš„ä»£ç ï¼Œä½¿å…¶hashæ”¹å˜ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨artemiså¯¹è¿™ä¸ªé¡¹ç›®è¿›è¡Œæ•è·ã€‚<br>å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Xss100m -Xms3096m -Xmx8044m  -jar Artemis.jar -p /Users/pony/Desktop/release/1.0.0/test/BenchmarkJava-master  -od workspace</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥å‘ç°ï¼Œä½¿ç”¨å¢é‡æ•è·ä¹‹åï¼Œæ•è·æ—¶é—´ä»…ä»…èŠ±äº†75sï¼Œæ¯”å…¨é‡æ•è·æ•´æ•´çœäº†93.1%çš„æ—¶é—´ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªéå¸¸å–œäººçš„ç»“æœï¼Œå°¤å…¶æ˜¯å¯¹äºä¸€äº›éœ€è¦åœ¨æµæ°´çº¿ä¸Šè¿›è¡Œå¡ç‚¹ä¸”å¯¹æ‰«æå‡†ç¡®æ€§å’Œè¦†ç›–ç‡è¦æ±‚æ¯”è¾ƒé«˜çš„é¡¹ç›®ï¼Œè¿™æ— ç–‘æ˜¯ä¸€ä¸ªç¦éŸ³ã€‚</p>
<h1 id="å…­ã€é™æ€ä»£ç åˆ†ææŠ€æœ¯çš„å±•æœ›"><a href="#å…­ã€é™æ€ä»£ç åˆ†ææŠ€æœ¯çš„å±•æœ›" class="headerlink" title="å…­ã€é™æ€ä»£ç åˆ†ææŠ€æœ¯çš„å±•æœ›"></a>å…­ã€é™æ€ä»£ç åˆ†ææŠ€æœ¯çš„å±•æœ›</h1><p>éšç€å¤§æ¨¡å‹çš„å‘å±•ï¼Œé™æ€ä»£ç ä¹Ÿå°†è¿æ¥æ–°çš„å¥‘æœºã€‚ä¹‹å‰ä¸€äº›ä½¿ç”¨ä¼ ç»Ÿæ‰‹æ®µæ— æ³•å¾ˆå¥½è§£å†³çš„é—®é¢˜ï¼Œæ¯”å¦‚è¯¯æŠ¥åˆ¤å®šï¼Œæ›´åŠ ä¸“ä¸šæ€§åŠé’ˆå¯¹æ€§çš„ä»£ç ä¿®å¤å»ºè®®ï¼Œè‡ªåŠ¨åŒ–ä»£ç ä¿®å¤ï¼Œé€»è¾‘æ¼æ´çš„åˆ†æç­‰ç­‰ï¼Œéƒ½å°†å› ä¸ºå¤§æ¨¡å‹çš„å¼•å…¥è€Œæœ‰äº†æ–°çš„è§£å†³æ€è·¯ã€‚è€Œæœ‰äº†å¤§æ¨¡å‹çš„å¼•å…¥ï¼Œä¸€äº›è€ç‰Œçš„é™æ€ä»£ç å‚å•†å½¢æˆçš„æŠ€æœ¯å£å’å¯èƒ½ä¼šè¢«ä¸€ç³»åˆ—åŸºäºå¤§æ¨¡å‹çš„åˆ›æ–°çš„æ£€æµ‹ç­–ç•¥æ‰“ç ´ï¼Œä¸€äº›è‡´åŠ›äºæ›´æ·±å±‚æ¬¡ä»£ç åˆ†æçš„å®è·µè€…ï¼ŒæŠ“ä½æœºé‡ï¼Œæˆ–è®¸èƒ½å¤Ÿåœ¨è¿™ä¸ªé¢†åŸŸå½¢æˆæ–°çš„ç«äº‰åŠ›ã€‚</p>
<h1 id="ä¸ƒã€çŸ¥è¯†æ˜Ÿçƒ"><a href="#ä¸ƒã€çŸ¥è¯†æ˜Ÿçƒ" class="headerlink" title="ä¸ƒã€çŸ¥è¯†æ˜Ÿçƒ"></a>ä¸ƒã€çŸ¥è¯†æ˜Ÿçƒ</h1><p>å¦‚æœé˜ä¸‹å¯¹é™æ€ä»£ç åˆ†æä¹Ÿæ„Ÿå…´è¶£ï¼Œæƒ³é•¿æœŸåœ¨è¿™ä¸ªé¢†åŸŸè¿›è¡Œç ”ç©¶å­¦ä¹ ï¼Œæ¬¢è¿åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œæˆ‘å°†å®šæœŸåœ¨çŸ¥è¯†æ˜Ÿçƒé‡Œåˆ†äº«æˆ‘åœ¨é™æ€ä»£ç åˆ†ææ–¹é¢çš„å®è·µæ€è·¯ï¼Œå½“ç„¶ï¼Œåœ¨çŸ¥è¯†æ˜Ÿçƒä¸­çš„åŒå­¦ä¹Ÿå°†ä¼˜å…ˆè·å–æœ€æ–°ç‰ˆæœ¬çš„Artemisä»£ç å®‰å…¨æ‰«æå™¨çš„ä½“éªŒæƒã€‚<br><img src="/images/image.png" alt="æ˜Ÿçƒ"></p>
<h1 id="å…«ã€ç¨‹åºä¸‹è½½åœ°å€"><a href="#å…«ã€ç¨‹åºä¸‹è½½åœ°å€" class="headerlink" title="å…«ã€ç¨‹åºä¸‹è½½åœ°å€"></a>å…«ã€ç¨‹åºä¸‹è½½åœ°å€</h1><p><a target="_blank" rel="noopener" href="https://github.com/zsdlove/Artemis-release/releases/tag/v1.0.0">Artemis-release-v1.0.0</a></p>
<h1 id="ä½¿ç”¨è¯´æ˜"><a href="#ä½¿ç”¨è¯´æ˜" class="headerlink" title="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pony@ponydeMBP 1.0.0 % java -jar Artemis.jar -h</span><br><span class="line">Usage: SAST [-hV] [-bc=&lt;build_cmd&gt;] [-d=&lt;dbpath&gt;] [-j=&lt;java_home&gt;]</span><br><span class="line">            [-mr=&lt;mr_enable&gt;] [-od=&lt;out_dbpath&gt;] [-p=&lt;path&gt;] [-r=&lt;rulePath&gt;]</span><br><span class="line">            [-t=&lt;mr_target_path&gt;]</span><br><span class="line">static code analysis.</span><br><span class="line">      -bc, --build-command=&lt;build_cmd&gt;</span><br><span class="line">                            æŒ‡å®šç¼–è¯‘å‘½ä»¤.</span><br><span class="line">  -d, --database=&lt;dbpath&gt;   æŒ‡å®šåŠ è½½çš„æ•°æ®åº“è·¯å¾„.</span><br><span class="line">  -h, --help                Show this help message and exit.</span><br><span class="line">  -j, --java-home=&lt;java_home&gt;</span><br><span class="line">                            æŒ‡å®šjava_homeè·¯å¾„.</span><br><span class="line">      -mr, --mr-enable=&lt;mr_enable&gt;</span><br><span class="line">                            æ˜¯å¦å¯ç”¨mræ‰«æ.</span><br><span class="line">      -od, --output-database=&lt;out_dbpath&gt;</span><br><span class="line">                            æŒ‡å®šè¾“å‡ºçš„ç¼–è¯‘æ•°æ®åº“è·¯å¾„.</span><br><span class="line">  -p, --path=&lt;path&gt;         æŒ‡å®šæºç è·¯å¾„.</span><br><span class="line">  -r, --rule=&lt;rulePath&gt;     æŒ‡å®šè§„åˆ™è·¯å¾„.</span><br><span class="line">  -t, --mr-target-path=&lt;mr_target_path&gt;</span><br><span class="line">                            æŒ‡å®štargetæ•°æ®åº“è·¯å¾„.</span><br><span class="line">  -V, --version             Print version information and exit.</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://zsdlove.github.io/2025/03/03/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="pOny">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="pOny's blog">
      <meta itemprop="description" content="å®‰å…¨æ‰«ææŠ€æœ¯åˆ†äº«">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | pOny's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/03/hello-world/" class="post-title-link" itemprop="url">æ¬¢è¿</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2025-03-03 19:48:27 / Modified: 20:22:45" itemprop="dateCreated datePublished" datetime="2025-03-03T19:48:27+08:00">2025-03-03</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>æ¬¢è¿æ¥åˆ°æˆ‘çš„æŠ€æœ¯åšå®¢ã€‚æˆ‘æœ¬äººä¸»è¦ä¸“æ³¨åœ¨é™æ€ä»£ç åˆ†æé¢†åŸŸï¼Œå¦‚æœä½ åœ¨è¿™æ–¹é¢æœ‰å…´è¶£ï¼Œå¯åŠ å¾®ä¿¡äº¤æµï¼š<a href="mailto:&#55;&#52;&#x37;&#50;&#x38;&#x39;&#54;&#x33;&#57;&#64;&#x71;&#113;&#46;&#x63;&#111;&#x6d;">747289639@qq.com</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">pOny</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
